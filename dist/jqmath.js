"use strict";function __$styleInject(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var $=_interopDefault(require("jquery"));__$styleInject(".fm-math,fmath{font-family:STIXGeneral,DejaVu Serif,DejaVu Sans,Times,Lucida Sans Unicode,OpenSymbol,Standard Symbols L,serif;line-height:1.2}.fm-math mtext,fmath mtext{line-height:normal}.fm-mo,.ma-sans-serif,fmath mi[mathvariant*=sans-serif],fmath mn[mathvariant*=sans-serif],fmath mo,fmath ms[mathvariant*=sans-serif],fmath mtext[mathvariant*=sans-serif]{font-family:STIXGeneral,DejaVu Sans,DejaVu Serif,Lucida Sans Unicode,Arial Unicode MS,Lucida Grande,Times,OpenSymbol,Standard Symbols L,sans-serif}.fm-mo-Luc{font-family:STIXGeneral,DejaVu Sans,DejaVu Serif,Lucida Sans Unicode,Lucida Grande,Arial Unicode MS,Times,OpenSymbol,Standard Symbols L,sans-serif}* html .fm-math,* html .fm-mo,* html .IE6-LSU,* html fmath,* html fmath mo{font-family:Lucida Sans Unicode!important}mo.fm-radic{font-family:Lucida Sans Unicode,Lucida Grande,Verdana,sans-serif!important}.ma-script,fmath mi[mathvariant*=script],fmath mn[mathvariant*=script],fmath mo[mathvariant*=script],fmath ms[mathvariant*=script],fmath mtext[mathvariant*=script]{font-family:England Hand DB,Embassy BT,Amazone BT,Bank Script D,URW Chancery L,Lucida Calligraphy,Apple Chancery,Monotype Corsiva,Corsiva,Vivaldi D,Gabriola,Segoe Script,cursive}.ma-fraktur,fmath mi[mathvariant*=fraktur],fmath mn[mathvariant*=fraktur],fmath mo[mathvariant*=fraktur],fmath ms[mathvariant*=fraktur],fmath mtext[mathvariant*=fraktur]{font-family:UnifrakturMaguntia,Impact,fantasy}fmath mi[mathvariant*=monospace],fmath mn[mathvariant*=monospace],fmath mo[mathvariant*=monospace],fmath ms[mathvariant*=monospace],fmath mtext[mathvariant*=monospace]{font-family:monospace}.fm-mi-length-1{font-style:italic}fmath mi[mathvariant]{font-style:normal}.ma-bold,fmath mi[mathvariant*=bold],fmath mn[mathvariant*=bold],fmath mo[mathvariant*=bold],fmath ms[mathvariant*=bold],fmath mtext[mathvariant*=bold]{font-weight:700}.ma-nonbold{font-weight:400}.ma-upright{font-style:normal!important}.ma-italic,fmath mi[mathvariant*=italic],fmath mn[mathvariant*=italic],fmath mo[mathvariant*=italic],fmath ms[mathvariant*=italic],fmath mtext[mathvariant*=italic]{font-style:italic}fmath.ma-block{display:block;text-align:center;text-indent:0;page-break-inside:avoid}.fm-separator{padding:0 .56ex 0 0}.fm-infix-loose{padding:0 .56ex}.fm-infix{padding:0 .44ex}.fm-prefix{padding:0 .33ex 0 0}.fm-postfix{padding:0 0 0 .33ex}.fm-prefix-tight{padding:0 .11ex 0 0}.fm-postfix-tight{padding:0 0 0 .11ex}.fm-quantifier{padding:0 .11ex 0 .22ex}.ma-non-marking{display:none}.fm-large-op{font-size:1.3em}.fm-inline .fm-large-op{font-size:1em}fmath mrow{white-space:nowrap}.fm-vert{display:inline-block;vertical-align:middle}fmath table,fmath tbody,fmath td,fmath tr{border:0!important;padding:0!important;margin:0!important;outline:0!important}fmath table{border-collapse:collapse!important;text-align:center!important;table-layout:auto!important;float:none!important}.fm-frac{padding:0 1px!important}td.fm-den-frac{border-top:thin solid!important}.fm-root{font-size:.6em}.fm-radicand{padding:0 1px 0 0;border-top:solid;margin-top:.1em}.fm-script{font-size:.71em}.fm-script .fm-script .fm-script{font-size:1em}td.fm-underover-base{line-height:1!important}td.fm-mtd{padding:.5ex .4em!important;vertical-align:baseline!important}fmath mphantom{visibility:hidden}fmath menclose,menclose.fm-menclose{display:inline-block}fmath menclose[notation=top],menclose.fm-menclose[notation=top]{border-top:thin solid}fmath menclose[notation=right],menclose.fm-menclose[notation=right]{border-right:thin solid}fmath menclose[notation=bottom],menclose.fm-menclose[notation=bottom]{border-bottom:thin solid}fmath menclose[notation=left],menclose.fm-menclose[notation=left]{border-left:thin solid}fmath menclose[notation=box],menclose.fm-menclose[notation=box]{border:thin solid}fmath none{display:none}fmath td.middle,mtd.middle{vertical-align:middle!important}fmath table[columnalign=left],fmath td[columnalign=left],fmath tr[columnalign=left]{text-align:left!important}fmath table[columnalign=right],fmath td[columnalign=right],fmath tr[columnalign=right]{text-align:right!important}fmath td[rowalign=top]{vertical-align:top!important}fmath td[rowalign=bottom]{vertical-align:bottom!important}fmath td[rowalign=center]{vertical-align:middle!important}fmath span.ma-join-align>table>tbody>tr>td:first-child,mtable.ma-join-align>mtr>mtd:first-child{text-align:right;padding-right:0!important}fmath span.ma-join1-align>table>tbody>tr>td:first-child,fmath span.ma-join-align>table>tbody>tr>td:first-child+td,mtable.ma-join1-align>mtr>mtd:first-child,mtable.ma-join-align>mtr>mtd:first-child+mtd{text-align:left;padding-left:0!important}fmath span.ma-binom>table>tbody>tr>td,mtable.ma-binom>mtr>mtd{padding:0!important}fmath span.ma-binom>table>tbody>tr:first-child>td,mtable.ma-binom>mtr:first-child>mtd{padding:0 0 .18em!important}",{});var F=function(){var i=Array.prototype.slice;function o(t){if("function"==typeof t)return o.curry.apply(void 0,arguments);if(2==arguments.length){var e=arguments[1];if("string"==typeof t)return e[t].bind(e);if("function"==typeof e)return("number"==typeof t?o.aritize:o.partial)(t,e)}return 1==arguments.length||o.err(err_F_1_),"number"==typeof t||"string"==typeof t?o.pToF(t):1==t.nodeType?jQuery.data(t):t&&"object"==typeof t?o.aToF(t):void o.err(err_F_2_)}return Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,r=i.call(arguments,1);return function(){return e.apply(t,r.concat(i.call(arguments,0)))}}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),Array.isArray||(Array.isArray=function(t){return"object"==typeof t&&null!==t&&"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),Date.now||(Date.now=function(){return(new Date).getTime()}),o.err=function(){throw Error("Assertion failed")},o.id=function(t){return t},o.constant=function(t){return function(){return t}},o.applyF=function(t,e){return t.apply(void 0,e)},o.curry=function(t){var e=t;return t=void 0,e.bind.apply(e,arguments)},o._={},o.partial=function(r,n){var a=r.length;return function(){for(var t=i.call(arguments,0),e=0;e<a;e++)r[e]!==o._?t.splice(e,0,r[e]):t.length==e&&t.push(void 0);return n.apply(this,t)}},o.uncurry=function(r){return function(t,e){return r(t)(e)}},o.o=function(){var r=arguments;return function(){for(var t=r.length,e=r[--t].apply(void 0,arguments);0<t;)e=r[--t](e);return e}},o.oMap=function(t,e){return function(){return o.applyF(t,o.map(e,arguments))}},o.flip=function(r){return function(t,e){return r(e,t)}},o.seqF=function(){var r=arguments,n=r.length;return function(){for(var t,e=0;e<n;e++)t=r[e].apply(void 0,arguments);return t}},o.cor=function(){var t=arguments;return function(){return o.any(o([o._,arguments],o.applyF),t)}},o.aritize=function(t,e){return function(){return o.applyF(e,i.call(arguments,0,t))}},o.not=function(t){return!t},o.defOr=function(t,e){return void 0!==t?t:e},o.cmpX=function(t,e){return t-e},o.cmpJS=function(t,e){return t<e?-1:t==e?0:1},o.cmpLex=function(r,t,n){return o.any(function(t,e){return e==n.length?1:r(t,n[e])},t)||t.length-n.length},o.eqTo=function(t,e){return e||(e=function(t,e){return t!==e}),o.o(o.not,o(e,t))},o.pToF=function(e){return function(t){return t[e]}},o.aToF=function(e){return function(t){return e[t]}},o.fToA=function(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=t(n);return r},o.memoF=function(e,r){return r||(r={}),function(t){return r.hasOwnProperty(t)?r[t]:r[t]=e(t)}},o.replicate=function(t,e){return o.fToA(o.constant(e),t)},o.setF=function(t,e,r){t[e]=r},o.obj1=function(t,e){var r={};return r[t]=e,r},o.slice=function(t,e,r){if(null==e&&(e=0),Array.isArray(t))return t.slice(e,r);var n=t.length;e=e<0?Math.max(0,n+e):Math.min(n,e),r=void 0===r?n:r<0?Math.max(0,n+r):Math.min(n,r);for(var a=[];e<r;)a.push(t[e++]);return a},o.array=function(){return i.call(arguments,0)},o.concatArgs=o.oMap(o("concat",[]),function(t){return Array.isArray(t)?t:o.slice(t)}),o.concatMap=function(t,e){return o.applyF(o.concatArgs,o.map(t,e))},o.reverseCopy=function(t){return o.slice(t).reverse()},o.findIndex=function(t,e){for(var r=e.length,n=0;n<r;n++)if(t(e[n],n,e))return n;return-1},o.findLastIndex=function(t,e){for(var r=e.length;0<=--r;)if(t(e[r],r,e))return r;return-1},o.find=function(t,e){var r=o.findIndex(t,e);return-1==r?void 0:e[r]},o.elemIndex=function(t,e,r){return e.indexOf&&!r&&Array.isArray(e)?e.indexOf(t):o.findIndex(o.eqTo(t,r),e)},o.elemLastIndex=function(t,e,r){return e.lastIndexOf&&!r&&Array.isArray(e)?e.lastIndexOf(t):o.findLastIndex(o.eqTo(t,r),e)},o.elem=function(t,e,r){return-1!=o.elemIndex(t,e,r)},o.all=function(t,e){if(e.every&&Array.isArray(e))return e.every(t);for(var r=e.length,n=0;n<r;n++)if(!t(e[n],n,e))return!1;return!0},o.any=function(t,e){for(var r=e.length,n=!1,a=0;a<r;a++)if(n=t(e[a],a,e))return n;return n},o.iter=function(t,e){if(2==arguments.length){if(e.forEach&&Array.isArray(e))return e.forEach(t);for(var r=e.length,n=0;n<r;n++)t(e[n],n,e)}else{2<arguments.length||o.err(err_iter_);var a=i.call(arguments,1);for(r=o.applyF(Math.min,o.map(o("length"),a)),n=0;n<r;n++)o.applyF(t,o.map(o(n),a).concat(n,a))}},o.map=function(t,e){if(e.map&&Array.isArray(e))return e.map(t);for(var r=e.length,n=new Array(r),a=0;a<r;a++)n[a]=t(e[a],a,e);return n},o.map1=function(t,e){return o.map(o(1,t),e)},o.zip=o(o.zipWith=function(t){1<arguments.length||o.err(err_zipWith_);for(var e=[],r=0;;r++){for(var n=[],a=1;a<arguments.length;a++){var i=arguments[a];if(!(r<i.length))return e;n.push(i[r])}e.push(o.applyF(t,n))}return e},o.array),o.unzip=function(t){return t.length?o.applyF(o.zip,t):[]},o.filter=function(a,t){return t.filter&&Array.isArray(t)?t.filter(a):o.fold(function(t,e,r,n){return a(e,r,n)&&t.push(e),t},t,[])},o.fold=function(t,e,r){if(e.reduce&&Array.isArray(e))return arguments.length<3?e.reduce(t):e.reduce(t,r);var n=e.length,a=0;for(arguments.length<3&&(r=n?e[a++]:o.err(err_fold_));a<n;a++)r=t(r,e[a],a,e);return r},o.foldR=function(t,e,r){if(e.reduceRight&&Array.isArray(e))return arguments.length<3?e.reduceRight(t):e.reduceRight(t,r);var n=e.length;for(arguments.length<3&&(r=n?e[--n]:o.err(err_foldR_));0<=--n;)r=t(r,e[n],n,e);return r},o.sum=function(t){for(var e=t.length,r=0,n=0;n<e;n++)r+=t[n];return r},o.test=function(r){if(0!==r&&""!==r||(r=typeof r),"string"==typeof r)return function(t){return typeof t==r};if(r===Array||r===Date||r===RegExp)return function(t){return null!=t&&t.constructor==r};if(null===r)return o.eqTo(null);if(r.constructor==RegExp)return o("test",r);if("function"==typeof r)return r;if(Array.isArray(r))return 1==r.length?(r=o.test(r[0]),function(t){return Array.isArray(t)&&o.all(r,t)}):(r=o.map(o.test,r),function(e){return o.any(function(t){return t(e)},r)});if("object"==typeof r){var t=Object.keys(r),n=o.map(o.o(o.test,o(r)),t);return function(r){return null!=r&&o.all(function(t,e){return n[e](r[t])},t)}}o.err(err_test_)},o.translations_={},o.s=function(t){return o.translations_[t]||t},o}();function M(t,e,r){return"number"==typeof t&&(t=String(t)),"string"==typeof t||Array.isArray(t)?M.sToMathE(t,e,r):1==t.nodeType&&"math"==t.tagName.toLowerCase()?M.eToMathE(t):void F.err(err_M_)}function appendMeArgs(e,t,r){return null==t||("string"==typeof t?e.appendChild(e.ownerDocument.createTextNode(t)):t.nodeType?e.appendChild(t):(t.constructor!=Array&&(t=F.slice(t)),F.iter(function(t){e.appendChild(t)},t))),M.setAttrs(e,r)}Math.sign||(Math.sign=function(t){return 0<(t=Number(t))?1:t<0?-1:t}),Math.trunc||(Math.trunc=function(t){return(t<0?Math.ceil:Math.floor)(t)}),M.toArray1=function(t){return Array.isArray(t)?t:[t]},M.getSpecAttrP=function(t,e){var r=t.getAttributeNode(e);return r&&!1!==r.specified?r.value:void 0},M.objToAttrs=function(t){var e=[];for(var r in t)e.push({name:r,value:t[r]});return e},M.setAttrs=function(e,t){return t&&null==t.length&&(t=M.objToAttrs(t)),F.iter(function(t){!1!==t.specified&&e.setAttribute(t.name,t.value)},t||[]),e},M.replaceNode=function(t,e){return e.parentNode.replaceChild(t,e),t},M.addClass=function(t,e){if(void 0!==t.className){var r=t.className;t.className=(r?r+" ":"")+e}else{r=t.getAttribute("class");t.setAttribute("class",(r?r+" ":"")+e)}return t},M.eToClassesS=function(t){return(void 0!==t.className?t.className:t.getAttribute("class"))||""},M.hasClass=function(t,e){return-1!=(" "+M.eToClassesS(t)+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")},M.inlineBlock=function(){var t=$("<div/>").css("display","inline-block");return arguments.length&&t.append.apply(t,arguments),t[0]},M.tr$=function(){var e=$.fn.append;return e.apply($("<tr/>"),F.map(function(t){return e.apply($("<td/>"),M.toArray1(t))},arguments))};var fixMathMLQ_=!(M.mathmlNS="http://www.w3.org/1998/Math/MathML");function checkMathMLAttrs(t){if(M.MathML&&!fixMathMLQ_)return t;var e=t.tagName.toLowerCase(),r=t.ownerDocument;function n(t){return r.createElementNS(M.mathmlNS,t)}if("mi"==e)!t.getAttribute("mathvariant")&&t.firstChild&&3==t.firstChild.nodeType&&t.setAttribute("mathvariant",1==t.firstChild.data.length?"italic":"normal");else if("mo"==e){if(1==t.childNodes.length&&3==t.firstChild.nodeType){var a=t.firstChild.data;/^[\u2061-\u2064]$/.test(a)&&M.addClass(t,"ma-non-marking")}}else if("mspace"==e)M.webkitVersion&&M.MathML&&(t.style.display="inline-block",t.style.minWidth=t.getAttribute("width")||"0px");else if("menclose"==e)M.webkitVersion&&M.MathML&&M.addClass(t,"fm-menclose");else if("mmultiscripts"==e&&M.webkitVersion){var i=F.slice(t.childNodes);if(0==i.length)throw"Wrong number of <mmultiscripts> arguments: 0";for(var o=[i[0]],s=1;s<i.length;s++)if("mprescripts"!=i[s].tagName){if(s+1==i.length)throw"Missing argument in <mmultiscripts>";var m=[o[0],i[s],i[s+1]];s++,o[0]=n("msubsup"),F.iter(function(t){o[0].appendChild(t)},m)}else o.unshift(n("none"));var l=t;t=appendMeArgs(n("mrow"),o,t.attributes),l.parentNode&&l.parentNode.replaceChild(t,l)}var c=t.getAttribute("mathcolor"),f=t.getAttribute("href");if(c&&t.style&&(t.style.color=c),f&&(!M.MathML||M.webkitVersion)){var d=r.createElement("A"),p=t.parentNode,u=t.nextSibling;d.appendChild(t),d.href=f,t=d,p&&p.insertBefore(t,u)}return t}function newMeNS(t,e,r,n){return n||(n=document),checkMathMLAttrs(appendMeArgs(M.MathPlayer?n.createElement("m:"+t):n.createElementNS(M.mathmlNS,t),e,r))}function checkVertStretch(t,e,r,n){if("mo"==r.nodeName.toLowerCase()&&1==r.childNodes.length){var a=r.firstChild,i=a.data;if(3==a.nodeType&&(.9<t||.9<e)&&(M.prefix_[i]<25||M.postfix_[i]<25||-1!="|‖√".indexOf(i)||n)){var o=(t+e)/1.2,s="√"==i,m=(s?.26:.35)+((s?.15:.25)-e)/o;r.style.fontSize=o.toFixed(3)+"em",r.style.verticalAlign=m.toFixed(3)+"em",r.fmUp=t,r.fmDn=e,r.style.display="inline-block",r.style.transform=r.style.msTransform=r.style.MozTransform=r.style.WebkitTransform="scaleX(0.5)"}}}function vertAlignE$(t,e,r){var n=$("<span/>").append(r);return n[0].fmUp=t,n[0].fmDn=e,n[0].style.verticalAlign=(.5*(t-e)).toFixed(3)+"em",n}!function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/webkit[ \/](\d+)\.(\d+)/);e?(M.webkitVersion=[Number(e[1]),Number(e[2])],fixMathMLQ_=M.webkitVersion[0]<=540):(e=t.match(/(opera)(?:.*version)?[ \/]([\w.]+)/)||t.match(/(msie) ([\w.]+)/)||t.indexOf("compatible")<0&&t.match(/(mozilla)(?:.*? rv:([\w.]+))?/))&&(M[e[1]+"Version"]=e[2]||"0")}(),M.msieVersion&&document.write('<object id=MathPlayer classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987">','</object><?IMPORT namespace="m" implementation="#MathPlayer" ?>'),function(){if(self.location){var t=location.search.match(/[?&;]mathml=(?:(off|false)|(on|true))\b/i);t?M.MathML=!t[1]:(M.webkitVersion&&F.cmpLex(F.cmpX,M.webkitVersion,[537,17])<0||M.operaVersion)&&(M.MathML=!1)}}(),M.canMathML=function(){if(M.msieVersion&&!M.MathPlayer)try{if(new ActiveXObject("MathPlayer.Factory.1"),null==M.MathPlayer)M.MathPlayer=!0;else if(!M.MathPlayer)return!1}catch(t){M.MathPlayer=!1}if(!M.MathPlayer&&void 0===document.createElementNS)return!1;var t=newMeNS("math",newMeNS("mn","1")),e=newMeNS("math",newMeNS("mfrac",[newMeNS("mn","1"),newMeNS("mn","2")])),r=$(F.map(function(t){return t.setAttribute("display","block"),$("<div/>").append(t)[0]},[t,e]));r.css("visibility","hidden").appendTo(document.body);var n=$(r[1]).height()>$(r[0]).height()+2;return r.remove(),n},M.mtagName=function(t){return"A"==t.tagName&&1==t.childNodes.length&&(t=t.firstChild),t.getAttribute("mtagname")||t.tagName.toLowerCase().replace(/^m:/,"")},M.mchilds=function(t){"A"==t.tagName&&1==t.childNodes.length&&(t=t.firstChild);for(var e=t.getAttribute("mtagname");"SPAN"==t.tagName;)t=t.firstChild;function r(t){return"SPAN"==t.tagName||F.err(err_span0_),t.firstChild}if("TABLE"==t.tagName){if("TBODY"==(t=t.firstChild).tagName||F.err(err_mchilds_tbody_),"mtable"==e)return t.childNodes;var n=t.childNodes;return"mover"==e?n=[n[1],n[0]]:"munderover"==e&&(n=[n[1],n[2],n[0]]),F.map(function(t){return t.firstChild.firstChild},n)}if("MROW"==t.tagName&&e){n=t.childNodes;if("msqrt"==e)return[r(r(n[1]))];if("mroot"==e)return[r(r(n[2])),r(n[0])];"mmultiscripts"==e||F.err(err_mchilds_mrow_);var a=Number(t.getAttribute("nprescripts"));0<=a&&a<n.length&&a%2==0||F.err(err_mchilds_mmultiscripts_);for(var i=[n[a]],o=a+1;o<n.length;o++)i.push(r(n[o]));if(a){i.push(t.ownerDocument.createElement("mprescripts"));for(o=0;o<a;o++)i.push(r(n[o]))}return i}return F.elem(t.tagName,["MSUB","MSUP","MSUBSUP"])?F.map(function(t,e){return e?r(t):t},t.childNodes):"MSPACE"==t.tagName?[]:t.childNodes};var decComma_,mtokens_=["mn","mi","mo","mtext","mspace","ms"],impMRows_=["fmath","msqrt","mtd","mstyle","merror","mpadded","mphantom","menclose"],accentDsByS_={"¯":[0,.85],"‾":[0,.85],"˙":[0,.75],"ˇ":[0,.7],"^":[0,.5],"~":[0,.4],"→":[.25,.25],_:[.7,0],"−":[.25,.45],".":[.6,.1]};M.newMe=function(t,e,r,n){if(n||(r&&9==r.nodeType?(n=r,r=void 0):n=document),null!=M.MathML||F.err(err_newMe_MathML_),M.MathML)return newMeNS(t,e,r,n);"math"==t&&(t="fmath");var a=$(appendMeArgs(n.createElement(t.toUpperCase()),e)),i=F.slice(a[0].childNodes);F.elem(t,impMRows_)&&1!=i.length&&(i=[M.newMe("mrow",i,void 0,n)],0==a[0].childNodes.length||F.err(err_newMe_imp_mrow_),a.append(i[0]));var o=F.map(function(t){return Number(t.fmUp||.6)},i),s=F.map(function(t){return Number(t.fmDn||.6)},i);if("fmath"==t||"mn"==t||"mtext"==t||"mprescripts"==t||"none"==t);else if("mstyle"==t||"merror"==t||"mpadded"==t||"mphantom"==t||"menclose"==t)i[0].fmUp&&(a[0].fmUp=i[0].fmUp),i[0].fmDn&&(a[0].fmDn=i[0].fmDn);else if("mi"==t){3==(L=1==i.length?i[0]:{}).nodeType&&1==L.data.length&&(a.addClass("fm-mi-length-1"),"f"==L.data&&a.css("padding-right","0.44ex"))}else if("mo"==t){3==(L=1==i.length?i[0]:{}).nodeType&&/[\]|([{‖)}]/.test(L.data)&&a.addClass("fm-mo-Luc")}else if("mspace"==t){var m=M.setAttrs(a[0],r);r=void 0,m.style.marginRight=m.getAttribute("width")||"0px",m.style.paddingRight="0.001em",a.append("‌"),a.css("visibility","hidden")}else if("mrow"==t){var l=F.applyF(Math.max,o),c=F.applyF(Math.max,s);(.65<l||.65<c)&&(a[0].fmUp=l,a[0].fmDn=c,F.iter(F([l,c,F._,void 0],checkVertStretch),i))}else if("mfrac"==t){if(2!=i.length)throw"Wrong number of <mfrac> arguments: "+i.length;var f=$('<td class="fm-num-frac fm-inline"></td>',n).append(i[0]),d=$('<td class="fm-den-frac fm-inline"></td>',n).append(i[1]);a=vertAlignE$(o[0]+s[0]+.03,o[1]+s[1]+.03,$('<span class="fm-vert fm-frac"></span>',n).append($("<table/>",n).append($("<tbody/>",n).append($("<tr/>",n).append(f)).append($("<tr/>",n).append(d))))).attr("mtagname",t)}else if("msqrt"==t||"mroot"==t){if(i.length!=("msqrt"==t?1:2))throw"Wrong number of <"+t+"> arguments: "+i.length;a=$("<mrow/>",n).attr("mtagname",t);var p=.06*(o[0]+s[0]);l=o[0]+p+.1,c=s[0];if("mroot"==t){var u=.6*(o[1]+s[1]),h=.25/.6-.25;u<l?h+=l/.6-o[1]:(h+=s[1],l=u),a.append($('<span class="fm-root fm-inline"></span>',n).append(i[1]).css("verticalAlign",h.toFixed(2)+"em"))}var g=$("<mo/>",n).addClass("fm-radic").append("√"),_=vertAlignE$(l,c,$('<span class="fm-vert fm-radicand"></span>',n).append(i[0]).css("borderTopWidth",p.toFixed(3)+"em"));checkVertStretch(l,c,g[0]),a.append(g).append(_),a[0].fmUp=l,a[0].fmDn=c}else if("msub"==t||"msup"==t||"msubsup"==t||"mmultiscripts"==t){if("mmultiscripts"!=t&&i.length!=("msubsup"==t?3:2))throw"Wrong number of <"+t+"> arguments: "+i.length;l=o[0],c=s[0];for(var v="msup"==t,b=l/.71-.6,y=c/.71-.6,x=1;x<i.length;x++){if("mmultiscripts"==t){if("none"==(A=M.mtagName(i[x])))continue;if("mprescripts"==A){if(v)throw'Repeated "mprescripts"';v=!0;continue}}x%2==(v?0:1)?y=Math.max(y,o[x]):b=Math.max(b,s[x])}var w=void 0,k=[],S=0;for(x=1;x<i.length;x++){var A;if("mmultiscripts"==t)if("mprescripts"==(A=M.mtagName(i[x]))){w=[],S=i.length-x-1;continue}h=.25/.71-.25;x%2==(w?0:1)&&"msup"!=t?(h-=y,c=Math.max(c,.71*(y+s[x]))):(h+=b,l=Math.max(l,.71*(b+o[x]))),$(i[x]).wrap('<span class="fm-script fm-inline"></span>').parent().css("verticalAlign",h.toFixed(2)+"em"),M.msieVersion&&(document.documentMode||M.msieVersion)<8&&(i[x].style.zoom=1),"mmultiscripts"==t&&(w||k).push(i[x].parentNode)}"mmultiscripts"==t&&(a=$("<mrow/>").append($((w||[]).concat(i[0],k))).attr({mtagname:"mmultiscripts",nprescripts:S})),a[0].fmUp=l,a[0].fmDn=c}else if("munder"==t||"mover"==t||"munderover"==t){if(i.length!=("munderover"==t?3:2))throw"Wrong number of <"+t+"> arguments: "+i.length;var P,N=$("<tbody/>",n);l=.85*o[0],c=.85*s[0];if("munder"!=t){var T=i[i.length-1],C=void 0;if(P=$("<td/>",n).append(T),"MO"==T.nodeName&&1==T.childNodes.length)3==(L=T.firstChild).nodeType&&(C=accentDsByS_[L.data]);C?(T.style.display="block",T.style.marginTop=(-C[0]).toFixed(2)+"em",T.style.marginBottom=(-C[1]).toFixed(2)+"em",l+=1.2-F.sum(C)):(P.addClass("fm-script fm-inline"),l+=.71*(o[i.length-1]+s[i.length-1])),N.append($("<tr/>",n).append(P))}if("MI"==i[0].nodeName&&1==i[0].childNodes.length){var L,I=(L=i[0].firstChild).data;if(3==L.nodeType&&1==I.length)(h=-1!="acegmnopqrsuvwxyz".indexOf(I)?.25:"t"==I?.15:0)&&(i[0].style.display="block",i[0].style.marginTop=(-h).toFixed(2)+"em",l-=h)}P=$('<td class="fm-underover-base"></td>',n).append(i[0]),N.append($("<tr/>",n).append(P)),"mover"!=t&&(P=$('<td class="fm-script fm-inline"></td>',n).append(i[1]),N.append($("<tr/>",n).append(P)),c+=.71*(o[1]+s[1])),a=vertAlignE$(l,c,$('<span class="fm-vert"></span>',n).append($("<table/>",n).append(N))).attr("mtagname",t)}else if("mtable"==t){N=$("<tbody/>",n).append($(i));a=$('<span class="fm-vert" mtagname="mtable"></span>',n).append($("<table/>",n).append(N));var j=F.sum(o)+F.sum(s);a[0].fmUp=a[0].fmDn=.5*j}else if("mtr"==t){a=$('<tr class="fm-mtr" mtagname="mtr"></tr>',n).append($(i));l=.6,c=.6;F.iter(function(t,e){1==(t.getAttribute(M.MathML?"rowspan":"rowSpan")||1)&&(l=Math.max(l,o[e]),c=Math.max(c,s[e]))},i),a[0].fmUp=l+.25,a[0].fmDn=c+.25}else{if("mtd"!=t){if("mfenced"==t){m=M.setAttrs(a[0],r);return M.newMe("mrow",M.mfencedToMRowArgs(m),r,n)}throw"Unrecognized or unimplemented MathML tagName: "+t}a=$('<td class="fm-mtd" mtagname="mtd"></td>',n).append($(i)),.65<o[0]&&(a[0].fmUp=o[0]),.65<s[0]&&(a[0].fmDn=s[0]);var m=M.setAttrs(a[0],r);r=void 0;var D=m.getAttribute("rowspan"),E=m.getAttribute("columnspan");D&&(m.setAttribute("rowSpan",D),M.hasClass(m,"middle")||M.addClass(m,"middle")),E&&m.setAttribute("colSpan",E)}return checkMathMLAttrs(M.setAttrs(a[0],r))},M.mfencedToMRowArgs=function(t){"mfenced"==t.tagName.toLowerCase()||F.err(err_mfencedToMRowArgs_);var e=t.ownerDocument;function r(t){return M.newMe("mo",t,void 0,e)}var n,a=[r(F.defOr(M.getSpecAttrP(t,"open"),"(")),r(F.defOr(M.getSpecAttrP(t,"close"),")"))],i=F.slice(t.childNodes);if(0==i.length)return a;if(1==i.length)n=i[0];else{for(var o=F.defOr(M.getSpecAttrP(t,"separators"),",").match(/\S/g),s=o?i.length-1:0,m=0;m<s;m++)i.splice(2*m+1,0,r(o[Math.min(m,o.length-1)]));n=M.newMe("mrow",i,void 0,e)}return a.splice(1,0,n),a},M.spaceMe=function(t,e){return M.newMe("mspace",void 0,{width:t},e)},M.fenceMe=function(t,e,r,n){return M.newMe("mrow",[M.newMe("mo",F.defOr(e,"("),n),t,M.newMe("mo",F.defOr(r,")"),n)],n)},F.iter(function(t){M[t]=F(M.newMe,t)},["mn","mi","mo","mtext","mspace","mrow","mfenced","mfrac","msqrt","mroot","msub","msup","msubsup","mmultiscripts","mprescripts","none","munder","mover","munderover","mtable","mtr","mtd","mstyle","merror","mpadded","mphantom","menclose"]),M.setMathBlockQ=function(t,e){return e?(t.setAttribute("display","block"),M.addClass(t,"ma-block")):M.MathML||$(t).addClass("fm-inline"),t},M.math=function(t,e,r){return M.setMathBlockQ(M.newMe("math",t,r),e)},M.eToMathE=function(t){if(null!=M.MathML&&"math"==t.tagName.toLowerCase()||F.err(err_eToMathE_),M.MathML&&"math"==t.tagName)return fixMathMLQ_?function t(e){return 1!=e.nodeType?e:(F.elem(e.tagName,mtokens_)||F.iter(t,e.childNodes),checkMathMLAttrs(e))}(t):t;var i=t.ownerDocument;return function e(r){var t=r.tagName.toLowerCase(),n=r.childNodes;F.elem(t,mtokens_)?"mo"==t&&1==n.length&&3==n[0].nodeType&&"-"==n[0].data&&(n=M["-"]):n=F.concatMap(function(t){return 3==t.nodeType?/^\s*$/.test(t.data)?[]:[M.mtext(t.data,i)]:8==t.nodeType?[]:(1==r.nodeType||F.err(err_newMeDeep_),[e(t)])},n);var a=M.newMe(t,n,r.attributes,i);return"math"==t&&M.setMathBlockQ(a,"block"==r.getAttribute("display")),a}(t)},M["-"]="−",M.trimNumS=function(t){return t.replace(/(\d\.\d*?)0+(?!\d)/g,"$1").replace(/(\d)\.(?!\d)/g,"$1").replace(/[-\u2212]0(?![.\d])/g,"0")},M.numS=function(t,e){return e&&(t=M.trimNumS(t)),t.replace(/Infinity/gi,"∞").replace(/NaN/gi,"{?}").replace(/e(-\d+)/gi,"·10^{$1}").replace(/e\+?(\d+)/gi,"·10^$1").replace(/-/g,M["-"])},M.combiningChar_="[̀-ͯ᷀-᷿⃐-⃿︠-︯]",M.surrPair_="[\ud800-\udbff][\udc00-\udfff]";var escPat_="[\\\\`]([A-Za-z]+|.)";M.decimalComma=function(t){if(null!=t){var e=((decComma_=t)?"\\d*,\\d+|":"")+"\\d+\\.?\\d*|\\.\\d+";M.re_=RegExp("("+e+")|"+escPat_+"|"+M.surrPair_+"|\\S"+M.combiningChar_+"*","g")}return decComma_};var s_,s_or_mx_a_,s_or_mx_i_,docP_,precAdj_,commaLangs="af|an|ar|av|az|ba|be|bg|bs|ca|ce|co|cs|cu|cv|da|de|el|es|et|eu|fi|fo|fr|gl|hr|hu|hy|id|is|it|jv|kk|kl|kv|lb|lt|lv|mk|mn|mo|nl|no|os|pl|pt|ro|ru|sc|sk|sq|sr|su|sv|tr|tt|ug|uk|vi|yi";function setPrecs(r,t){F.iter(function(t){var e=t[0];F.iter(function(t){r[t]=e},t[1].split(""))},t)}function newMe_(t,e,r){return M.newMe(t,e,r,docP_)}function emptyMe_(){return newMe_("mspace")}function scanWord(t){var e=/\s*([-\w.]*)/g;e.lastIndex=M.re_.lastIndex;var r=e.exec(s_);if(!r[1])throw"Missing "+(t||"word");return M.re_.lastIndex=e.lastIndex,r[1]}function scanString(t){var e=/\s*(?:(["'])|([-\w.]*))/g;e.lastIndex=M.re_.lastIndex;var r=e.exec(s_);if(r[2])return M.re_.lastIndex=e.lastIndex,r[2];if(!r[1])throw"Missing "+(t||"string");var n=r[1],a=RegExp("[^\\`"+n+"]+|[\\`](.|\n)|("+n+")","g"),i="";for(a.lastIndex=e.lastIndex;;){if(!(r=a.exec(s_)))throw"Missing closing "+n;if(r[2])break;i+=r[1]||r[0]}return M.re_.lastIndex=a.lastIndex,i}function scanMeTok(t){var e=scanTokP();if(!e||!e[0])throw"Missing expression argument"+(t?" after "+t:"")+", before position "+M.re_.lastIndex;return e}function mtokenScan(t){var e=scanString("mtext"==t?"text":t);return[newMe_(t,e),"mo"==t?e:null]}function htmlScan(){if(!M.trustHtml)throw"\\html use requires M.trustHtml";var t=scanString("html"),e=$("<div/>",docP_||document).css("display","inline-block").html(t)[0];return 1==e.childNodes.length&&(e=e.childNodes[0]),[newMe_("mtext",e),null]}function spScan(){var t=scanString("\\sp width");return[M.spaceMe(t,docP_),/^[^-]*[1-9]/.test(t)?" ":null]}function braceScan(){var t=scanTokP();if(t&&"↖"==t[1]&&!t[0]){var e=parseEmbel();if(t=e[1]||scanTokP(),!e[0]||!t||"}"!=t[1]||t[0])throw'Expected an embellished operator and "}" after "{↖", before position '+M.re_.lastIndex;return e[0]}var r=parse_mxP_tokP(0,t);return!(t=r[1])||"}"==t[1]&&!t[0]||F.err(err_braceScan_),[r[0]||emptyMe_(),null]}function attrScan(t,e){t||(t=scanWord("attribute name"));var r=scanString(t+" attribute"),n=scanMeTok(t);return e&&!M.MathML||n[0].setAttribute(t,r),n}function clScan(){var t="CSS class name(s)",e=scanString(t),r=scanMeTok(t);return M.addClass(r[0],e),r}function mvScan(t){var e=t||scanString("mathvariant"),r=scanMeTok(e),n=r[0];if(!F.elem(M.mtagName(n),["mi","mn","mo","mtext","mspace","ms"]))throw"Can only apply a mathvariant to a MathML token (atomic) element, at position "+M.re_.lastIndex;return n.setAttribute("mathvariant",e),/bold/.test(e)?M.addClass(n,"ma-bold"):"normal"!=e&&"italic"!=e||M.addClass(n,"ma-nonbold"),M.addClass(n,/italic/.test(e)?"ma-italic":"ma-upright"),/double-struck/.test(e)?M.addClass(n,"ma-double-struck"):/fraktur/.test(e)?M.addClass(n,"ma-fraktur"):/script/.test(e)?M.addClass(n,"ma-script"):/sans-serif/.test(e)&&M.addClass(n,"ma-sans-serif"),r}function meScan(t){t||(t=scanWord("tagName"));var e=scanMeTok({menclose:"enclose"}[t]||t);return[newMe_(t,e[0]),F.elem(t,["mstyle","mpadded"])?e[1]:null]}function phantomScan(t){var e=scanMeTok(t);return F.iter(function(t){t.disabled=!0},$("input",e[0])),"vphantom"==t&&(e[0]=newMe_("mpadded",e[0],{width:"0",style:"display: inline-block; width: 0"})),[newMe_("mphantom",e[0]),e[1]]}function ovScan(){return[M.menclose(scanMeTok("\\ov")[0],{notation:"top"},docP_),null]}function minsizeScan(){var t=scanString("minsize"),e=scanMeTok("minsize"),r=e[0];if("mo"!=M.mtagName(r))throw"Can only stretch an operator symbol, before position "+M.re_.lastIndex;if(M.MathML)r.setAttribute("minsize",t);else{var n=/^(.+)em$/.exec(t);n&&(t=n[1]);var a=Number(t);1<a?checkVertStretch(.6*a,.6*a,r,!0):a||(r.style.fontSize=t)}return e}function mrow1Scan(){return[newMe_("mrow",scanMeTok("\\mrowOne")[0]),null]}function binomScan(){var t=scanMeTok("\\binom")[0],e=scanMeTok("\\binom")[0],r=newMe_("mtable",F.map(function(t){return newMe_("mtr",newMe_("mtd",t))},[t,e]));return M.addClass(r,"ma-binom"),M.MathML||(r.fmUp-=.41,r.fmDn-=.41),[newMe_("mrow",[newMe_("mo","("),r,newMe_("mo",")")]),null]}M.decimalComma(RegExp("^("+commaLangs+")\\b","i").test(document.documentElement.lang)),M.infix_={"⊂⃒":240,"⊃⃒":240,"≪̸":260,"≫̸":260,"⪯̸":260,"⪰̸":260,"∽̱":265,"≂̸":265,"≎̸":265,"≏̸":265,"≦̸":265,"≿̸":265,"⊏̸":265,"⊐̸":265,"⧏̸":265,"⧐̸":265,"⩽̸":265,"⩾̸":265,"⪡̸":265,"⪢̸":265," ":390,"":500},M.prefix_={},M.postfix_={},setPrecs(M.infix_,[[21,"|"],[30,";"],[40,",⁣"],[70,"∴∵"],[100,":"],[110,"϶"],[150,"…⋮⋯⋱"],[160,"∋"],[170,"⊢⊣⊤⊨⊩⊬⊭⊮⊯"],[190,"∨"],[200,"∧"],[240,"∁∈∉∌⊂⊃⊄⊅⊆⊇⊈⊉⊊⊋"],[241,"≤"],[242,"≥"],[243,">"],[244,"≯"],[245,"<"],[246,"≮"],[247,"≈"],[250,"∼≉"],[252,"≢"],[255,"≠"],[260,"=∝∤∥∦≁≃≄≅≆≇≍≔≗≙≚≜≟≡≨≩≪≫≭≰≱≺≻≼≽⊀⊁⊥⊴⊵⋉⋊⋋⋌⋔⋖⋗⋘⋙⋪⋫⋬⋭■□▪▫▭▮▯▰▱△▴▵▶▷▸▹▼▽▾▿◀◁◂◃◄◅◆◇◈◉◌◍◎●◖◗◦⧀⧁⧣⧤⧥⧦⧳⪇⪈⪯⪰"],[265,"⁄∆∊∍∎∕∗∘∙∟∣∶∷∸∹∺∻∽∾∿≂≊≋≌≎≏≐≑≒≓≕≖≘≝≞≣≦≧≬≲≳≴≵≶≷≸≹≾≿⊌⊍⊎⊏⊐⊑⊒⊓⊔⊚⊛⊜⊝⊦⊧⊪⊫⊰⊱⊲⊳⊶⊷⊹⊺⊻⊼⊽⊾⊿⋄⋆⋇⋈⋍⋎⋏⋐⋑⋒⋓⋕⋚⋛⋜⋝⋞⋟⋠⋡⋢⋣⋤⋥⋦⋧⋨⋩⋰⋲⋳⋴⋵⋶⋷⋸⋹⋺⋻⋼⋽⋾⋿▲❘⦁⦂⦠⦡⦢⦣⦤⦥⦦⦧⦨⦩⦪⦫⦬⦭⦮⦯⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧂⧃⧄⧅⧆⧇⧈⧉⧊⧋⧌⧍⧎⧏⧐⧑⧒⧓⧔⧕⧖⧗⧘⧙⧛⧜⧝⧞⧠⧡⧢⧧⧨⧩⧪⧫⧬⧭⧮⧰⧱⧲⧵⧶⧷⧸⧹⧺⧻⧾⧿⨝⨞⨟⨠⨡⨢⨣⨤⨥⨦⨧⨨⨩⨪⨫⨬⨭⨮⨰⨱⨲⨳⨴⨵⨶⨷⨸⨹⨺⨻⨼⨽⨾⩀⩁⩂⩃⩄⩅⩆⩇⩈⩉⩊⩋⩌⩍⩎⩏⩐⩑⩒⩓⩔⩕⩖⩗⩘⩙⩚⩛⩜⩝⩞⩟⩠⩡⩢⩣⩤⩥⩦⩧⩨⩩⩪⩫⩬⩭⩮⩯⩰⩱⩲⩳⩴⩵⩶⩷⩸⩹⩺⩻⩼⩽⩾⩿⪀⪁⪂⪃⪄⪅⪆⪉⪊⪋⪌⪍⪎⪏⪐⪑⪒⪓⪔⪕⪖⪗⪘⪙⪚⪛⪜⪝⪞⪟⪠⪡⪢⪣⪤⪥⪦⪧⪨⪩⪪⪫⪬⪭⪮⪱⪲⪳⪴⪵⪶⪷⪸⪹⪺⪻⪼⪽⪾⪿⫀⫁⫂⫃⫄⫅⫆⫇⫈⫉⫊⫋⫌⫍⫎⫏⫐⫑⫒⫓⫔⫕⫖⫗⫘⫙⫚⫛⫝⫝⫞⫟⫠⫡⫢⫣⫤⫥⫦⫧⫨⫩⫪⫫⫬⫭⫮⫯⫰⫱⫲⫳⫴⫵⫶⫷⫸⫹⫺⫻⫽⫾"],[270,"←↑→↓↔↕↖↗↘↙↚↛↜↝↞↟↠↡↢↣↤↥↦↧↨↩↪↫↬↭↮↯↰↱↲↳↴↵↶↷↸↹↺↻↼↽↾↿⇀⇁⇂⇃⇄⇅⇆⇇⇈⇉⇊⇋⇌⇍⇎⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇚⇛⇜⇝⇞⇟⇠⇡⇢⇣⇤⇥⇦⇧⇨⇩⇪⇫⇬⇭⇮⇯⇰⇱⇲⇳⇴⇵⇶⇷⇸⇹⇺⇻⇼⇽⇾⇿⊸⟰⟱⟵⟶⟷⟸⟹⟺⟻⟼⟽⟾⟿⤀⤁⤂⤃⤄⤅⤆⤇⤈⤉⤊⤋⤌⤍⤎⤏⤐⤑⤒⤓⤔⤕⤖⤗⤘⤙⤚⤛⤜⤝⤞⤟⤠⤡⤢⤣⤤⤥⤦⤧⤨⤩⤪⤫⤬⤭⤮⤯⤰⤱⤲⤳⤴⤵⤶⤷⤸⤹⤺⤻⤼⤽⤾⤿⥀⥁⥂⥃⥄⥅⥆⥇⥈⥉⥊⥋⥌⥍⥎⥏⥐⥑⥒⥓⥔⥕⥖⥗⥘⥙⥚⥛⥜⥝⥞⥟⥠⥡⥢⥣⥤⥥⥦⥧⥨⥩⥪⥫⥬⥭⥮⥯⥰⥱⥲⥳⥴⥵⥶⥷⥸⥹⥺⥻⥼⥽⥾⥿⦙⦚⦛⦜⦝⦞⦟⧟⧯⧴⭅⭆"],[275,"+-±−∓∔⊞⊟"],[300,"⊕⊖⊘"],[340,"≀"],[350,"∩∪"],[390,"*.×•⁢⊠⊡⋅⨯⨿"],[400,"·"],[410,"⊗"],[640,"%"],[650,"\\∖"],[660,"/÷"],[710,"⊙"],[825,"@"],[835,"?"],[850,"⁡"],[880,"^_⁤"]]),setPrecs(M.prefix_,[[10,"‘“"],[20,"([{‖⌈⌊❲⟦⟨⟪⟬⟮⦀⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧼"],[230,"∀∃∄"],[290,"∑⨊⨋"],[300,"∬∭⨁"],[310,"∫∮∯∰∱∲∳⨌⨍⨎⨏⨐⨑⨒⨓⨔⨕⨖⨗⨘⨙⨚⨛⨜"],[320,"⋃⨃⨄"],[330,"⋀⋁⋂⨀⨂⨅⨆⨇⨈⨉⫼⫿"],[350,"∏∐"],[670,"∠∡∢"],[680,"¬"],[740,"∂∇"],[845,"ⅅⅆ√∛∜"]]),setPrecs(M.postfix_,[[10,"’”"],[20,")]}‖⌉⌋❳⟧⟩⟫⟭⟯⦀⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧽"],[800,"′♭♮♯"],[810,"!"],[880,"&'`~¨¯°´¸ˆˇˉˊˋˍ˘˙˚˜˝˷̂̑‾⃛⃜⎴⎵⏜⏝⏞⏟⏠⏡"]]),M.macros_={mn:F(mtokenScan,"mn"),mi:F(mtokenScan,"mi"),mo:F(mtokenScan,"mo"),text:F(mtokenScan,"mtext"),html:htmlScan,sp:spScan,attr:attrScan,attrMML:F(attrScan,null,!0),id:F(attrScan,"id"),dir:F(attrScan,"dir"),cl:clScan,mv:mvScan,bo:F(mvScan,"bold"),it:F(mvScan,"italic"),bi:F(mvScan,"bold-italic"),sc:F(mvScan,"script"),bs:F(mvScan,"bold-script"),fr:F(mvScan,"fraktur"),ds:F(mvScan,"double-struck"),bf:F(mvScan,"bold-fraktur"),mstyle:F(meScan,"mstyle"),merror:F(meScan,"merror"),mpadded:F(meScan,"mpadded"),phantom:F(phantomScan,"phantom"),vphantom:F(phantomScan,"vphantom"),enclose:F(meScan,"menclose"),ov:ovScan,minsize:minsizeScan,mrowOne:mrow1Scan,binom:binomScan},M.alias_={"-":M["-"],"'":"′","ℭ":["C","fraktur"],"ℌ":["H","fraktur"],"ℑ":["I","fraktur"],"ℜ":["R","fraktur"],"ℨ":["Z","fraktur"],"ℬ":["B","script"],"ℰ":["E","script"],"ℱ":["F","script"],"ℋ":["H","script"],"ℐ":["I","script"],"ℒ":["L","script"],"ℳ":["M","script"],"ℛ":["R","script"],"ℯ":["e","script"],"ℊ":["g","script"],"ℴ":["o","script"]};var spaces_={",":".17em",":":".22em",";":".28em","!":"-.17em"};function scanTokP(){for(var t=M.re_.exec(s_);!t;){if(M.re_.lastIndex=s_.length,s_or_mx_i_==s_or_mx_a_.length)return null;var e=s_or_mx_a_[s_or_mx_i_++];if("string"==typeof e)M.re_.lastIndex=0,s_=e,t=M.re_.exec(s_);else{if(1==e.nodeType)return[e,null];F.err(err_scanTokP_)}}var r=t[2]||t[0],n=null;if(/^[_^}\u2196\u2199]$/.test(t[0])||t[2]&&M.macro1s_[r])return[null,r];if("{"==t[0])return braceScan();if(t[2]&&M.macros_[r])return M.macros_[r]();if(t[1])return[M.newMe("mn",r,docP_),null];if(/^[,:;!]$/.test(t[2]))r=" ";else if("/"==t[2])r="∕";else if(M.alias_[r]&&!t[2]){var a=M.alias_[r];"string"==typeof a?r=a:(r=a[0],n=a[1])}var i,o=M.infix_[r]||M.prefix_[r]||M.postfix_[r]?r:null;if(" "==r)i=M.spaceMe(spaces_[t[2]||","],docP_);else if(o){if(/^[∛∜]$/.test(r)&&!t[2])return i=newMe_("mn","∛"==r?"3":"4"),[newMe_("msup",[newMe_("mo","√"),i]),"√"];i=M.newMe("mo",r,docP_),/^[∀∃∄∂∇]$/.test(r)?(i.setAttribute("lspace",".11em"),i.setAttribute("rspace",".06em")):"!"==r?(i.setAttribute("lspace",".06em"),i.setAttribute("rspace","0")):"×"==r&&(i.setAttribute("lspace",".22em"),i.setAttribute("rspace",".22em"))}else i=M.newMe("mi",r,docP_),t[2]&&1==r.length?(i.setAttribute("mathvariant","normal"),M.addClass(i,"ma-upright"),M.MathML||(i.style.paddingRight="0")):n&&(i.setAttribute("mathvariant",n),M.addClass(i,"ma-upright"),M.addClass(i,"ma-"+n)),/\w\w/.test(r)&&M.addClass(i,"ma-repel-adj");return[i,o]}function parse_mtd_tokP(t){var e=parse_mxP_tokP(M.infix_[","]),r=e[1]||scanTokP(),n=e[0];if(!n){if(t&&(!r||","!=r[1]))return[null,r];n=emptyMe_()}var a=M.mtagName(n);return"mtd"==a||"mtr"==a&&t||(n=M.newMe("mtd",n,docP_)),[n,r]}function parse_rowspan_tokP(){var t=scanString("rowspan"),e=parse_mtd_tokP(),r=e[0];return r.setAttribute(M.MathML?"rowspan":"rowSpan",t),M.hasClass(r,"middle")||M.addClass(r,"middle"),e}function parse_colspan_tokP(){var t=scanString("colspan"),e=parse_mtd_tokP();return e[0].setAttribute(M.MathML?"columnspan":"colSpan",t),e}function parse_mtr_tokP(t){for(var e=[];;){var r=parse_mtd_tokP(0==e.length),n=r[0],a=r[1]||scanTokP();if(n){if("mtr"==M.mtagName(n))return[n,a];e.push(n)}if(!a||","!=a[1])return[e.length||!t||a&&";"==a[1]?M.newMe("mtr",e,docP_):null,a]}}function parse_table_tokP(t){void 0===t&&(t=M.dtableQ);for(var e=[];;){var r=parse_mtr_tokP(0==e.length),n=r[0],a=r[1]||scanTokP();if(n&&e.push(n),!a||";"!=a[1])return[newMe_("mtable",e,t?{displaystyle:!0}:void 0),a]}}function parse_math_tokP(){var t=parse_mxP_tokP(0);return t[0]=M.newMe("math",t[0],docP_),t}M.dtableQ=!1,M.macro1s_={mtd:parse_mtd_tokP,rowspan:parse_rowspan_tokP,colspan:parse_colspan_tokP,mtr:parse_mtr_tokP,dtable:F(parse_table_tokP,!0),ttable:F(parse_table_tokP,!1),table:F(parse_table_tokP,void 0),math:parse_math_tokP};var embelWs_={_:"sub","^":"sup","↙":"under","↖":"over"};function embelKP(t){var e=embelWs_[t];return e&&(e.length<4?"ss":"uo")}function parseEmbel(t,a){for(;;){if(a||(a=scanTokP()),!a||a[0]||!embelWs_[a[1]]){if(a&&!t){t=a,a=null;continue}return[t,a]}var i=embelKP(a[1]),e=function(){for(var t={},e={};a||(a=scanTokP()),a&&!a[0];){var r=a[1];if(embelKP(r)!=i||e[r])break;if(e[r]=!0,!(a=scanTokP())||embelKP(a[1])!=i||a[0]){var n=parse_mxP_tokP(999,a);t[r]=n[0],a=n[1]}}return t},r=e();if("uo"==i||!a||(a[0]?t:"ss"!=embelKP(a[1]))){t||(t=[emptyMe_(),null]);var n="m",o=[t[0]];F.iter(function(t){r[t]&&(n+=embelWs_[t],o.push(r[t]))},["_","^","↙","↖"]),1<o.length&&(t=[M.newMe(n,o,docP_),t[1]])}else{for(var s=[r];a&&!a[0]&&"ss"==embelKP(a[1]);)s.push(e());if(!t)if(a&&a[0]){t=a,a=scanTokP();for(var m=[];a&&!a[0]&&"ss"==embelKP(a[1]);)m.push(e());s=m.concat(null,s)}else t=[emptyMe_(),null];o=[t[0]];F.iter(function(t){t?o.push(t._||M.newMe("none",void 0,docP_),t["^"]||M.newMe("none",void 0,docP_)):o.push(M.newMe("mprescripts",void 0,docP_))},s),t=[M.newMe("mmultiscripts",o,docP_),t[1]]}}}function parse_mxP_tokP(t,e){for(var r=null;e||(e=scanTokP());){var n=e[1];if(!n||r&&(e[0]?!M.infix_[n]&&!M.postfix_[n]:M.macro1s_[n]))if(r){if(precAdj_<=t)break;var a=(u=parse_mxP_tokP(precAdj_,e))[0];a||F.err(err_parse_mxP_tokP_1_);var i=M.newMe("mrow",[r,a],docP_);(M.hasClass(r,"ma-repel-adj")||M.hasClass(a,"ma-repel-adj"))&&(n&&e[0]&&M.prefix_[n]<25||$(r).after(M.spaceMe(".17em",docP_)),M.addClass(i,"ma-repel-adj")),r=i,e=u[1]}else r=e[0],e=null;else{var o=e[0];if(o){var s=M.infix_[n]||M.postfix_[n];if(s&&s<=t)break;var m=M.infix_[n]||!(r&&M.postfix_[n])&&M.prefix_[n];!M.MathML&&!r&&290<=m&&m<=350&&($(o).addClass("fm-large-op"),o.fmUp=.855,o.fmDn=.705);var l=[];(d=parseEmbel(e))[0]||F.err(err_parse_mxP_tokP_embel_);var c=d[0][0];if(e=d[1],r&&l.push(r),l.push(c),m)(u=parse_mxP_tokP(m,e))[0]&&l.push(u[0]),e=u[1],m<25&&!r&&(e||(e=scanTokP()),e&&e[1]&&e[0]&&(M.postfix_[e[1]]||M.infix_[e[1]])==m&&(l.push(e[0]),e=null));if(1==l.length)r=l[0];else if("/"==n&&r&&3==l.length||"√"==n&&!r&&2==l.length)"√"==n&&"msup"==M.mtagName(l[0])?r=M.newMe("mroot",[l[1],M.mchilds(l[0])[1]],docP_):(l.splice(l.length-2,1),r=M.newMe("/"==n?"mfrac":"msqrt",l,docP_));else{i=M.newMe("mrow",l,docP_);if(" "==n||precAdj_<=(s||m));else{var f="";"="==n?f="infix-loose":2==l.length?(f=r?"postfix":"prefix",M.infix_[n]?f+="-tight":(/^[∀∃∄∂∇]$/.test(n)&&(f="quantifier"),M.addClass(i,"ma-repel-adj"))):r&&(f=","==n||";"==n?"separator":s<=270?"infix-loose":"infix","|"==n&&M.MathML&&"mo"==o.tagName&&(o.setAttribute("lspace",".11em"),o.setAttribute("rspace",".11em"))),M.MathML||!f||o.style.fontSize||$(c).addClass("fm-"+f)}r=i}}else{if("}"==n)break;if(M.macro1s_[n]){!r||F.err(err_parse_mxP_tokP_macro_),r=(u=M.macro1s_[n]())[0],e=u[1]}else{if(embelWs_[n]||F.err(err_parse_mxP_tokP_script_),999<=t)break;var d,p=(d=parseEmbel(r&&[r,null],e))[0];p||F.err(err_parse_mxP_tokP_embel_2_),e=d[1];l=[p[0]];var u,h=p[1];if(h)if(m=M.infix_[h]||M.prefix_[h])(u=parse_mxP_tokP(m,e))[0]&&l.push(u[0]),e=u[1];r=1==l.length?l[0]:M.newMe("mrow",l,docP_)}}}}return[r,e]}function parseMath(t){try{M.parseMath(t)}catch(t){console.error(t)}}M.sMxAToMe=function(t,e){e||(e=document),M.infix_[""]&&M.infix_[","]||F.err(err_sToMe_1_),void 0===M.MathML&&(M.MathML=M.canMathML()),M.re_.lastIndex=0,s_="",s_or_mx_a_=Array.isArray(t)?t:[t],s_or_mx_i_=0,docP_=e,precAdj_=M.infix_[""];var r=parse_mxP_tokP(0);if(r[1])throw"Extra input:  "+r[1][1]+s_.substring(M.re_.lastIndex)+(s_or_mx_i_<s_or_mx_a_.length?"...":"");return(M.re_.lastIndex<s_.length||s_or_mx_i_<s_or_mx_a_.length)&&F.err(err_sToMe_2_),r[0]||emptyMe_()},M.sToMathE=function(t,e,r){var n=M.sMxAToMe(t,r);return F.elem(M.mtagName(n),["math","fmath"])||(n=M.newMe("math",n,r)),"string"==typeof t&&n.setAttribute("alttext",t),M.setMathBlockQ(n,e)},M.$mathQ=!0,M.inline$$Q=!1,M.parseMath=function(e){if(1==e.nodeType&&"SCRIPT"!=e.tagName)if("MATH"==e.tagName.toUpperCase()){var t=M.eToMathE(e);t!=e&&e.parentNode.replaceChild(t,e)}else for(var r=e.firstChild;r;){var n=r.nextSibling;M.parseMath(r),r=n}else if(3==e.nodeType&&/[$\\]/.test(e.data)){for(var a=e.ownerDocument,i=e.data,o=[],s="",m=/\\([$\\])|\$\$?|\\[([]/g;;){var l=m.lastIndex,c=m.exec(i),f=c?c.index:i.length;if(l<f&&(s+=i.substring(l,f)),c&&c[1])s+=c[1];else{var d,p=-1;if(c){if(d="\\("==c[0]?"\\)":"\\["==c[0]?"\\]":c[0],m.lastIndex<i.length&&("$"!=c[0]||M.$mathQ))for(p=i.indexOf(d,m.lastIndex);-1!=p&&"\\"==i.charAt(p-1);)p=i.indexOf(d,p+1);if(-1==p){s+=c[0];continue}}if(s&&(o.push(a.createTextNode(s)),s=""),!c)break;var u="$$"==c[0]||"\\["==c[0],h=M.sToMathE(i.substring(m.lastIndex,p),u,a);if(u&&M.inline$$Q&&F.elem(e.parentNode.nodeName,["P","SPAN"])){var g=$("<div/>",a).css("display","inline-block").append(h);h=(g=$("<span/>",a).css("white-space","nowrap").append(g))[0]}o.push(h),m.lastIndex=p+d.length}}F.iter(function(t){e.parentNode.insertBefore(t,e)},o),e.parentNode.removeChild(e)}},M.parseMathQ=!0,null==$.fn.parseMath&&($.fn.parseMath=function(){return F.iter(M.parseMath,this),this}),exports.parseMath=parseMath,exports.M=M;
