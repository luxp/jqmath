"use strict";function __$styleInject(t,e){if("undefined"==typeof document)return e;t=t||"";var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");return n.type="text/css",r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e}function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function M(t,e,r){return"number"==typeof t&&(t=String(t)),"string"==typeof t||Array.isArray(t)?M.sToMathE(t,e,r):1==t.nodeType&&"math"==t.tagName.toLowerCase()?M.eToMathE(t):void F.err(err_M_)}function appendMeArgs(t,e,r){return null==e||("string"==typeof e?t.appendChild(t.ownerDocument.createTextNode(e)):e.nodeType?t.appendChild(e):(e.constructor!=Array&&(e=F.slice(e)),F.iter(function(e){t.appendChild(e)},e))),M.setAttrs(t,r)}function checkMathMLAttrs(t){function e(t){return n.createElementNS(M.mathmlNS,t)}if(M.MathML&&!fixMathMLQ_)return t;var r=t.tagName.toLowerCase(),n=t.ownerDocument;if("mi"==r)!t.getAttribute("mathvariant")&&t.firstChild&&3==t.firstChild.nodeType&&t.setAttribute("mathvariant",1==t.firstChild.data.length?"italic":"normal");else if("mo"==r){if(1==t.childNodes.length&&3==t.firstChild.nodeType){var a=t.firstChild.data;/^[\u2061-\u2064]$/.test(a)&&M.addClass(t,"ma-non-marking")}}else if("mspace"==r)M.webkitVersion&&M.MathML&&(t.style.display="inline-block",t.style.minWidth=t.getAttribute("width")||"0px");else if("menclose"==r)M.webkitVersion&&M.MathML&&M.addClass(t,"fm-menclose");else if("mmultiscripts"==r&&M.webkitVersion){var i=F.slice(t.childNodes);if(0==i.length)throw"Wrong number of <mmultiscripts> arguments: 0";for(var o=[i[0]],s=1;s<i.length;s++)if("mprescripts"!=i[s].tagName){if(s+1==i.length)throw"Missing argument in <mmultiscripts>";var m=[o[0],i[s],i[s+1]];s++,o[0]=e("msubsup"),F.iter(function(t){o[0].appendChild(t)},m)}else o.unshift(e("none"));var l=t;t=appendMeArgs(e("mrow"),o,t.attributes),l.parentNode&&l.parentNode.replaceChild(t,l)}var c=t.getAttribute("mathcolor"),f=t.getAttribute("href");if(c&&t.style&&(t.style.color=c),f&&(!M.MathML||M.webkitVersion)){var d=n.createElement("A"),p=t.parentNode,u=t.nextSibling;d.appendChild(t),d.href=f,t=d,p&&p.insertBefore(t,u)}return t}function newMeNS(t,e,r,n){return n||(n=document),checkMathMLAttrs(appendMeArgs(M.MathPlayer?n.createElement("m:"+t):n.createElementNS(M.mathmlNS,t),e,r))}function checkVertStretch(t,e,r,n){if("mo"==r.nodeName.toLowerCase()&&1==r.childNodes.length){var a=r.firstChild,i=a.data;if(3==a.nodeType&&(t>.9||e>.9)&&(M.prefix_[i]<25||M.postfix_[i]<25||-1!="|‖√".indexOf(i)||n)){var o=(t+e)/1.2,s="√"==i,m=(s?.26:.35)+((s?.15:.25)-e)/o;r.style.fontSize=o.toFixed(3)+"em",r.style.verticalAlign=m.toFixed(3)+"em",r.fmUp=t,r.fmDn=e,r.style.display="inline-block",r.style.transform=r.style.msTransform=r.style.MozTransform=r.style.WebkitTransform="scaleX(0.5)"}}}function vertAlignE$(t,e,r){var n=$("<span/>").append(r);return n[0].fmUp=t,n[0].fmDn=e,n[0].style.verticalAlign=(.5*(t-e)).toFixed(3)+"em",n}function setPrecs(t,e){F.iter(function(e){var r=e[0];F.iter(function(e){t[e]=r},e[1].split(""))},e)}function newMe_(t,e,r){return M.newMe(t,e,r,docP_)}function emptyMe_(){return newMe_("mspace")}function scanWord(t){var e=/\s*([-\w.]*)/g;e.lastIndex=M.re_.lastIndex;var r=e.exec(s_);if(!r[1])throw"Missing "+(t||"word");return M.re_.lastIndex=e.lastIndex,r[1]}function scanString(t){var e=/\s*(?:(["'])|([-\w.]*))/g;e.lastIndex=M.re_.lastIndex;var r=e.exec(s_);if(r[2])return M.re_.lastIndex=e.lastIndex,r[2];if(!r[1])throw"Missing "+(t||"string");var n=r[1],a=RegExp("[^\\`"+n+"]+|[\\`](.|\n)|("+n+")","g"),i="";for(a.lastIndex=e.lastIndex;;){if(!(r=a.exec(s_)))throw"Missing closing "+n;if(r[2])break;i+=r[1]||r[0]}return M.re_.lastIndex=a.lastIndex,i}function scanMeTok(t){var e=scanTokP();if(!e||!e[0])throw"Missing expression argument"+(t?" after "+t:"")+", before position "+M.re_.lastIndex;return e}function mtokenScan(t){var e=scanString("mtext"==t?"text":t);return[newMe_(t,e),"mo"==t?e:null]}function htmlScan(){if(!M.trustHtml)throw"\\html use requires M.trustHtml";var t=scanString("html"),e=$("<div/>",docP_||document).css("display","inline-block").html(t)[0];return 1==e.childNodes.length&&(e=e.childNodes[0]),[newMe_("mtext",e),null]}function spScan(){var t=scanString("\\sp width");return[M.spaceMe(t,docP_),/^[^-]*[1-9]/.test(t)?" ":null]}function braceScan(){var t=scanTokP();if(t&&"↖"==t[1]&&!t[0]){var e=parseEmbel();if(t=e[1]||scanTokP(),!e[0]||!t||"}"!=t[1]||t[0])throw'Expected an embellished operator and "}" after "{↖", before position '+M.re_.lastIndex;return e[0]}var r=parse_mxP_tokP(0,t);return!(t=r[1])||"}"==t[1]&&!t[0]||F.err(err_braceScan_),[r[0]||emptyMe_(),null]}function attrScan(t,e){t||(t=scanWord("attribute name"));var r=scanString(t+" attribute"),n=scanMeTok(t);return e&&!M.MathML||n[0].setAttribute(t,r),n}function clScan(){var t="CSS class name(s)",e=scanString(t),r=scanMeTok(t);return M.addClass(r[0],e),r}function mvScan(t){var e=t||scanString("mathvariant"),r=scanMeTok(e),n=r[0];if(!F.elem(M.mtagName(n),["mi","mn","mo","mtext","mspace","ms"]))throw"Can only apply a mathvariant to a MathML token (atomic) element, at position "+M.re_.lastIndex;return n.setAttribute("mathvariant",e),/bold/.test(e)?M.addClass(n,"ma-bold"):"normal"!=e&&"italic"!=e||M.addClass(n,"ma-nonbold"),M.addClass(n,/italic/.test(e)?"ma-italic":"ma-upright"),/double-struck/.test(e)?M.addClass(n,"ma-double-struck"):/fraktur/.test(e)?M.addClass(n,"ma-fraktur"):/script/.test(e)?M.addClass(n,"ma-script"):/sans-serif/.test(e)&&M.addClass(n,"ma-sans-serif"),r}function meScan(t){t||(t=scanWord("tagName"));var e=scanMeTok({menclose:"enclose"}[t]||t);return[newMe_(t,e[0]),F.elem(t,["mstyle","mpadded"])?e[1]:null]}function phantomScan(t){var e=scanMeTok(t);return F.iter(function(t){t.disabled=!0},$("input",e[0])),"vphantom"==t&&(e[0]=newMe_("mpadded",e[0],{width:"0",style:"display: inline-block; width: 0"})),[newMe_("mphantom",e[0]),e[1]]}function ovScan(){return[M.menclose(scanMeTok("\\ov")[0],{notation:"top"},docP_),null]}function minsizeScan(){var t=scanString("minsize"),e=scanMeTok("minsize"),r=e[0];if("mo"!=M.mtagName(r))throw"Can only stretch an operator symbol, before position "+M.re_.lastIndex;if(M.MathML)r.setAttribute("minsize",t);else{var n=/^(.+)em$/.exec(t);n&&(t=n[1]);var a=Number(t);a>1?checkVertStretch(.6*a,.6*a,r,!0):a||(r.style.fontSize=t)}return e}function mrow1Scan(){return[newMe_("mrow",scanMeTok("\\mrowOne")[0]),null]}function binomScan(){var t=scanMeTok("\\binom")[0],e=scanMeTok("\\binom")[0],r=newMe_("mtable",F.map(function(t){return newMe_("mtr",newMe_("mtd",t))},[t,e]));return M.addClass(r,"ma-binom"),M.MathML||(r.fmUp-=.41,r.fmDn-=.41),[newMe_("mrow",[newMe_("mo","("),r,newMe_("mo",")")]),null]}function scanTokP(){for(var t=M.re_.exec(s_);!t;){if(M.re_.lastIndex=s_.length,s_or_mx_i_==s_or_mx_a_.length)return null;var e=s_or_mx_a_[s_or_mx_i_++];if("string"==typeof e)M.re_.lastIndex=0,s_=e,t=M.re_.exec(s_);else{if(1==e.nodeType)return[e,null];F.err(err_scanTokP_)}}var r=t[2]||t[0],n=null;if(/^[_^}\u2196\u2199]$/.test(t[0])||t[2]&&M.macro1s_[r])return[null,r];if("{"==t[0])return braceScan();if(t[2]&&M.macros_[r])return M.macros_[r]();if(t[1])return[M.newMe("mn",r,docP_),null];if(/^[,:;!]$/.test(t[2]))r=" ";else if("/"==t[2])r="∕";else if(M.alias_[r]&&!t[2]){var a=M.alias_[r];"string"==typeof a?r=a:(r=a[0],n=a[1])}var i,o=M.infix_[r]||M.prefix_[r]||M.postfix_[r]?r:null;if(" "==r)i=M.spaceMe(spaces_[t[2]||","],docP_);else if(o){if(/^[∛∜]$/.test(r)&&!t[2])return i=newMe_("mn","∛"==r?"3":"4"),[newMe_("msup",[newMe_("mo","√"),i]),"√"];i=M.newMe("mo",r,docP_),/^[∀∃∄∂∇]$/.test(r)?(i.setAttribute("lspace",".11em"),i.setAttribute("rspace",".06em")):"!"==r?(i.setAttribute("lspace",".06em"),i.setAttribute("rspace","0")):"×"==r&&(i.setAttribute("lspace",".22em"),i.setAttribute("rspace",".22em"))}else i=M.newMe("mi",r,docP_),t[2]&&1==r.length?(i.setAttribute("mathvariant","normal"),M.addClass(i,"ma-upright"),M.MathML||(i.style.paddingRight="0")):n&&(i.setAttribute("mathvariant",n),M.addClass(i,"ma-upright"),M.addClass(i,"ma-"+n)),/\w\w/.test(r)&&M.addClass(i,"ma-repel-adj");return[i,o]}function parse_mtd_tokP(t){var e=parse_mxP_tokP(M.infix_[","]),r=e[1]||scanTokP(),n=e[0];if(!n){if(t&&(!r||","!=r[1]))return[null,r];n=emptyMe_()}var a=M.mtagName(n);return"mtd"==a||"mtr"==a&&t||(n=M.newMe("mtd",n,docP_)),[n,r]}function parse_rowspan_tokP(){var t=scanString("rowspan"),e=parse_mtd_tokP(),r=e[0];return r.setAttribute(M.MathML?"rowspan":"rowSpan",t),M.hasClass(r,"middle")||M.addClass(r,"middle"),e}function parse_colspan_tokP(){var t=scanString("colspan"),e=parse_mtd_tokP();return e[0].setAttribute(M.MathML?"columnspan":"colSpan",t),e}function parse_mtr_tokP(t){for(var e=[];;){var r=parse_mtd_tokP(0==e.length),n=r[0],a=r[1]||scanTokP();if(n){if("mtr"==M.mtagName(n))return[n,a];e.push(n)}if(!a||","!=a[1])return[e.length||!t||a&&";"==a[1]?M.newMe("mtr",e,docP_):null,a]}}function parse_table_tokP(t){void 0===t&&(t=M.dtableQ);for(var e=[];;){var r=parse_mtr_tokP(0==e.length),n=r[0],a=r[1]||scanTokP();if(n&&e.push(n),!a||";"!=a[1])return[newMe_("mtable",e,t?{displaystyle:!0}:void 0),a]}}function parse_math_tokP(){var t=parse_mxP_tokP(0);return t[0]=M.newMe("math",t[0],docP_),t}function embelKP(t){var e=embelWs_[t];return e&&(e.length<4?"ss":"uo")}function parseEmbel(t,e){for(;;){if(e||(e=scanTokP()),!e||e[0]||!embelWs_[e[1]]){if(e&&!t){t=e,e=null;continue}return[t,e]}var r=embelKP(e[1]),n=function(){for(var t={},n={};;){if(e||(e=scanTokP()),!e||e[0])break;var a=e[1];if(embelKP(a)!=r||n[a])break;if(n[a]=!0,!(e=scanTokP())||embelKP(e[1])!=r||e[0]){var i=parse_mxP_tokP(999,e);t[a]=i[0],e=i[1]}}return t},a=n();if("uo"==r||!e||(e[0]?t:"ss"!=embelKP(e[1]))){t||(t=[emptyMe_(),null]);var i="m",o=[t[0]];F.iter(function(t){a[t]&&(i+=embelWs_[t],o.push(a[t]))},["_","^","↙","↖"]),o.length>1&&(t=[M.newMe(i,o,docP_),t[1]])}else{for(var s=[a];e&&!e[0]&&"ss"==embelKP(e[1]);)s.push(n());if(!t)if(e&&e[0]){t=e,e=scanTokP();for(var m=[];e&&!e[0]&&"ss"==embelKP(e[1]);)m.push(n());s=m.concat(null,s)}else t=[emptyMe_(),null];o=[t[0]];F.iter(function(t){t?o.push(t._||M.newMe("none",void 0,docP_),t["^"]||M.newMe("none",void 0,docP_)):o.push(M.newMe("mprescripts",void 0,docP_))},s),t=[M.newMe("mmultiscripts",o,docP_),t[1]]}}}function parse_mxP_tokP(t,e){for(var r=null;;){if(!e&&!(e=scanTokP()))break;var n=e[1];if(!n||r&&(e[0]?!(M.infix_[n]||M.postfix_[n]):M.macro1s_[n]))if(r){if(t>=precAdj_)break;var a=(h=parse_mxP_tokP(precAdj_,e))[0];a||F.err(err_parse_mxP_tokP_1_);l=M.newMe("mrow",[r,a],docP_);(M.hasClass(r,"ma-repel-adj")||M.hasClass(a,"ma-repel-adj"))&&(n&&e[0]&&M.prefix_[n]<25||$(r).after(M.spaceMe(".17em",docP_)),M.addClass(l,"ma-repel-adj")),r=l,e=h[1]}else r=e[0],e=null;else{var i=e[0];if(i){var o=M.infix_[n]||M.postfix_[n];if(o&&t>=o)break;var s=M.infix_[n]||!(r&&M.postfix_[n])&&M.prefix_[n];!M.MathML&&!r&&290<=s&&s<=350&&($(i).addClass("fm-large-op"),i.fmUp=.855,i.fmDn=.705);p=[];(f=parseEmbel(e))[0]||F.err(err_parse_mxP_tokP_embel_);var m=f[0][0];if(e=f[1],r&&p.push(r),p.push(m),s&&((h=parse_mxP_tokP(s,e))[0]&&p.push(h[0]),e=h[1],s<25&&!r&&(e||(e=scanTokP()),e&&e[1]&&e[0]&&(M.postfix_[e[1]]||M.infix_[e[1]])==s&&(p.push(e[0]),e=null))),1==p.length)r=p[0];else if("/"==n&&r&&3==p.length||"√"==n&&!r&&2==p.length)"√"==n&&"msup"==M.mtagName(p[0])?r=M.newMe("mroot",[p[1],M.mchilds(p[0])[1]],docP_):(p.splice(p.length-2,1),r=M.newMe("/"==n?"mfrac":"msqrt",p,docP_));else{var l=M.newMe("mrow",p,docP_);if(" "==n||(o||s)>=precAdj_);else{var c="";"="==n?c="infix-loose":2==p.length?(c=r?"postfix":"prefix",M.infix_[n]?c+="-tight":(/^[∀∃∄∂∇]$/.test(n)&&(c="quantifier"),M.addClass(l,"ma-repel-adj"))):r&&(c=","==n||";"==n?"separator":o<=270?"infix-loose":"infix","|"==n&&M.MathML&&"mo"==i.tagName&&(i.setAttribute("lspace",".11em"),i.setAttribute("rspace",".11em"))),M.MathML||!c||i.style.fontSize||$(m).addClass("fm-"+c)}r=l}}else{if("}"==n)break;if(M.macro1s_[n])!r||F.err(err_parse_mxP_tokP_macro_),r=(h=M.macro1s_[n]())[0],e=h[1];else{if(embelWs_[n]||F.err(err_parse_mxP_tokP_script_),t>=999)break;var f=parseEmbel(r&&[r,null],e),d=f[0];d||F.err(err_parse_mxP_tokP_embel_2_),e=f[1];var p=[d[0]],u=d[1];if(u&&(s=M.infix_[u]||M.prefix_[u])){var h=parse_mxP_tokP(s,e);h[0]&&p.push(h[0]),e=h[1]}r=1==p.length?p[0]:M.newMe("mrow",p,docP_)}}}}return[r,e]}function parseMath(t){if(void 0===M.MathML&&(M.MathML=M.canMathML()),M.parseMathQ)try{M.parseMath(t)}catch(t){console.error(t)}}Object.defineProperty(exports,"__esModule",{value:!0});var $=_interopDefault(require("jquery"));__$styleInject(".fm-math,fmath{font-family:STIXGeneral,DejaVu Serif,DejaVu Sans,Times,Lucida Sans Unicode,OpenSymbol,Standard Symbols L,serif;line-height:1.2}.fm-math mtext,fmath mtext{line-height:normal}.fm-mo,.ma-sans-serif,fmath mi[mathvariant*=sans-serif],fmath mn[mathvariant*=sans-serif],fmath mo,fmath ms[mathvariant*=sans-serif],fmath mtext[mathvariant*=sans-serif]{font-family:STIXGeneral,DejaVu Sans,DejaVu Serif,Lucida Sans Unicode,Arial Unicode MS,Lucida Grande,Times,OpenSymbol,Standard Symbols L,sans-serif}.fm-mo-Luc{font-family:STIXGeneral,DejaVu Sans,DejaVu Serif,Lucida Sans Unicode,Lucida Grande,Arial Unicode MS,Times,OpenSymbol,Standard Symbols L,sans-serif}* html .fm-math,* html .fm-mo,* html .IE6-LSU,* html fmath,* html fmath mo{font-family:Lucida Sans Unicode!important}mo.fm-radic{font-family:Lucida Sans Unicode,Lucida Grande,Verdana,sans-serif!important}.ma-script,fmath mi[mathvariant*=script],fmath mn[mathvariant*=script],fmath mo[mathvariant*=script],fmath ms[mathvariant*=script],fmath mtext[mathvariant*=script]{font-family:England Hand DB,Embassy BT,Amazone BT,Bank Script D,URW Chancery L,Lucida Calligraphy,Apple Chancery,Monotype Corsiva,Corsiva,Vivaldi D,Gabriola,Segoe Script,cursive}.ma-fraktur,fmath mi[mathvariant*=fraktur],fmath mn[mathvariant*=fraktur],fmath mo[mathvariant*=fraktur],fmath ms[mathvariant*=fraktur],fmath mtext[mathvariant*=fraktur]{font-family:UnifrakturMaguntia,Impact,fantasy}fmath mi[mathvariant*=monospace],fmath mn[mathvariant*=monospace],fmath mo[mathvariant*=monospace],fmath ms[mathvariant*=monospace],fmath mtext[mathvariant*=monospace]{font-family:monospace}.fm-mi-length-1{font-style:italic}fmath mi[mathvariant]{font-style:normal}.ma-bold,fmath mi[mathvariant*=bold],fmath mn[mathvariant*=bold],fmath mo[mathvariant*=bold],fmath ms[mathvariant*=bold],fmath mtext[mathvariant*=bold]{font-weight:700}.ma-nonbold{font-weight:400}.ma-upright{font-style:normal!important}.ma-italic,fmath mi[mathvariant*=italic],fmath mn[mathvariant*=italic],fmath mo[mathvariant*=italic],fmath ms[mathvariant*=italic],fmath mtext[mathvariant*=italic]{font-style:italic}fmath.ma-block{display:block;text-align:center;text-indent:0;page-break-inside:avoid}.fm-separator{padding:0 .56ex 0 0}.fm-infix-loose{padding:0 .56ex}.fm-infix{padding:0 .44ex}.fm-prefix{padding:0 .33ex 0 0}.fm-postfix{padding:0 0 0 .33ex}.fm-prefix-tight{padding:0 .11ex 0 0}.fm-postfix-tight{padding:0 0 0 .11ex}.fm-quantifier{padding:0 .11ex 0 .22ex}.ma-non-marking{display:none}.fm-large-op{font-size:1.3em}.fm-inline .fm-large-op{font-size:1em}fmath mrow{white-space:nowrap}.fm-vert{display:inline-block;vertical-align:middle}fmath table,fmath tbody,fmath td,fmath tr{border:0!important;padding:0!important;margin:0!important;outline:0!important}fmath table{border-collapse:collapse!important;text-align:center!important;table-layout:auto!important;float:none!important}.fm-frac{padding:0 1px!important}td.fm-den-frac{border-top:thin solid!important}.fm-root{font-size:.6em}.fm-radicand{padding:0 1px 0 0;border-top:solid;margin-top:.1em}.fm-script{font-size:.71em}.fm-script .fm-script .fm-script{font-size:1em}td.fm-underover-base{line-height:1!important}td.fm-mtd{padding:.5ex .4em!important;vertical-align:baseline!important}fmath mphantom{visibility:hidden}fmath menclose,menclose.fm-menclose{display:inline-block}fmath menclose[notation=top],menclose.fm-menclose[notation=top]{border-top:thin solid}fmath menclose[notation=right],menclose.fm-menclose[notation=right]{border-right:thin solid}fmath menclose[notation=bottom],menclose.fm-menclose[notation=bottom]{border-bottom:thin solid}fmath menclose[notation=left],menclose.fm-menclose[notation=left]{border-left:thin solid}fmath menclose[notation=box],menclose.fm-menclose[notation=box]{border:thin solid}fmath none{display:none}fmath td.middle,mtd.middle{vertical-align:middle!important}fmath table[columnalign=left],fmath td[columnalign=left],fmath tr[columnalign=left]{text-align:left!important}fmath table[columnalign=right],fmath td[columnalign=right],fmath tr[columnalign=right]{text-align:right!important}fmath td[rowalign=top]{vertical-align:top!important}fmath td[rowalign=bottom]{vertical-align:bottom!important}fmath td[rowalign=center]{vertical-align:middle!important}fmath span.ma-join-align>table>tbody>tr>td:first-child,mtable.ma-join-align>mtr>mtd:first-child{text-align:right;padding-right:0!important}fmath span.ma-join1-align>table>tbody>tr>td:first-child,fmath span.ma-join-align>table>tbody>tr>td:first-child+td,mtable.ma-join1-align>mtr>mtd:first-child,mtable.ma-join-align>mtr>mtd:first-child+mtd{text-align:left;padding-left:0!important}fmath span.ma-binom>table>tbody>tr>td,mtable.ma-binom>mtr>mtd{padding:0!important}fmath span.ma-binom>table>tbody>tr:first-child>td,mtable.ma-binom>mtr:first-child>mtd{padding:0 0 .18em!important}",void 0);var F=function(){function t(e){if("function"==typeof e)return t.curry.apply(void 0,arguments);if(2==arguments.length){var r=arguments[1];if("string"==typeof e)return r[e].bind(r);if("function"==typeof r)return("number"==typeof e?t.aritize:t.partial)(e,r)}return 1==arguments.length||t.err(err_F_1_),"number"==typeof e||"string"==typeof e?t.pToF(e):1==e.nodeType?jQuery.data(e):e&&"object"==typeof e?t.aToF(e):void t.err(err_F_2_)}var e=Array.prototype.slice;return Function.prototype.bind||(Function.prototype.bind=function(t){var r=this,n=e.call(arguments,1);return function(){return r.apply(t,n.concat(e.call(arguments,0)))}}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),Array.isArray||(Array.isArray=function(t){return"object"==typeof t&&null!==t&&"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),Date.now||(Date.now=function(){return(new Date).getTime()}),t.err=function(){throw t.debug,Error("Assertion failed")},t.id=function(t){return t},t.constant=function(t){return function(){return t}},t.applyF=function(t,e){return t.apply(void 0,e)},t.curry=function(t){var e=t;return arguments[0]=void 0,e.bind.apply(e,arguments)},t._={},t.partial=function(r,n){var a=r.length;return function(){for(var i=e.call(arguments,0),o=0;o<a;o++)r[o]!==t._?i.splice(o,0,r[o]):i.length==o&&i.push(void 0);return n.apply(this,i)}},t.uncurry=function(t){return function(e,r){return t(e)(r)}},t.o=function(){var t=arguments;return function(){for(var e=t.length,r=t[--e].apply(void 0,arguments);e>0;)r=t[--e](r);return r}},t.oMap=function(e,r){return function(){return t.applyF(e,t.map(r,arguments))}},t.flip=function(t){return function(e,r){return t(r,e)}},t.seqF=function(){var t=arguments,e=t.length;return function(){for(var r,n=0;n<e;n++)r=t[n].apply(void 0,arguments);return r}},t.cor=function(){var e=arguments;return function(){return t.any(t([t._,arguments],t.applyF),e)}},t.aritize=function(r,n){return function(){return t.applyF(n,e.call(arguments,0,r))}},t.not=function(t){return!t},t.defOr=function(t,e){return void 0!==t?t:e},t.cmpX=function(t,e){return t-e},t.cmpJS=function(t,e){return t<e?-1:t==e?0:1},t.cmpLex=function(e,r,n){return t.any(function(t,r){return r==n.length?1:e(t,n[r])},r)||r.length-n.length},t.eqTo=function(e,r){return r||(r=function(t,e){return t!==e}),t.o(t.not,t(r,e))},t.pToF=function(t){return function(e){return e[t]}},t.aToF=function(t){return function(e){return t[e]}},t.fToA=function(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=t(n);return r},t.memoF=function(t,e){return e||(e={}),function(r){return e.hasOwnProperty(r)?e[r]:e[r]=t(r)}},t.replicate=function(e,r){return t.fToA(t.constant(r),e)},t.setF=function(t,e,r){t[e]=r},t.obj1=function(t,e){var r={};return r[t]=e,r},t.slice=function(t,e,r){if(null==e&&(e=0),Array.isArray(t))return t.slice(e,r);var n=t.length;e=e<0?Math.max(0,n+e):Math.min(n,e),r=void 0===r?n:r<0?Math.max(0,n+r):Math.min(n,r);for(var a=[];e<r;)a.push(t[e++]);return a},t.array=function(){return e.call(arguments,0)},t.concatArgs=t.oMap(t("concat",[]),function(e){return Array.isArray(e)?e:t.slice(e)}),t.concatMap=function(e,r){return t.applyF(t.concatArgs,t.map(e,r))},t.reverseCopy=function(e){return t.slice(e).reverse()},t.findIndex=function(t,e){for(var r=e.length,n=0;n<r;n++)if(t(e[n],n,e))return n;return-1},t.findLastIndex=function(t,e){for(var r=e.length;--r>=0;)if(t(e[r],r,e))return r;return-1},t.find=function(e,r){var n=t.findIndex(e,r);return-1==n?void 0:r[n]},t.elemIndex=function(e,r,n){return r.indexOf&&!n&&Array.isArray(r)?r.indexOf(e):t.findIndex(t.eqTo(e,n),r)},t.elemLastIndex=function(e,r,n){return r.lastIndexOf&&!n&&Array.isArray(r)?r.lastIndexOf(e):t.findLastIndex(t.eqTo(e,n),r)},t.elem=function(e,r,n){return-1!=t.elemIndex(e,r,n)},t.all=function(t,e){if(e.every&&Array.isArray(e))return e.every(t);for(var r=e.length,n=0;n<r;n++)if(!t(e[n],n,e))return!1;return!0},t.any=function(t,e){for(var r=e.length,n=!1,a=0;a<r;a++)if(n=t(e[a],a,e))return n;return n},t.iter=function(r,n){if(2==arguments.length){if(n.forEach&&Array.isArray(n))return n.forEach(r);for(var a=n.length,i=0;i<a;i++)r(n[i],i,n)}else{arguments.length>2||t.err(err_iter_);for(var o=e.call(arguments,1),a=t.applyF(Math.min,t.map(t("length"),o)),i=0;i<a;i++)t.applyF(r,t.map(t(i),o).concat(i,o))}},t.map=function(t,e){if(e.map&&Array.isArray(e))return e.map(t);for(var r=e.length,n=new Array(r),a=0;a<r;a++)n[a]=t(e[a],a,e);return n},t.map1=function(e,r){return t.map(t(1,e),r)},t.zipWith=function(e){arguments.length>1||t.err(err_zipWith_);for(var r=[],n=0;;n++){for(var a=[],i=1;i<arguments.length;i++){var o=arguments[i];if(!(n<o.length))return r;a.push(o[n])}r.push(t.applyF(e,a))}return r},t.zip=t(t.zipWith,t.array),t.unzip=function(e){return e.length?t.applyF(t.zip,e):[]},t.filter=function(e,r){return r.filter&&Array.isArray(r)?r.filter(e):t.fold(function(t,r,n,a){return e(r,n,a)&&t.push(r),t},r,[])},t.fold=function(e,r,n){if(r.reduce&&Array.isArray(r))return arguments.length<3?r.reduce(e):r.reduce(e,n);var a=r.length,i=0;for(arguments.length<3&&(n=a?r[i++]:t.err(err_fold_));i<a;i++)n=e(n,r[i],i,r);return n},t.foldR=function(e,r,n){if(r.reduceRight&&Array.isArray(r))return arguments.length<3?r.reduceRight(e):r.reduceRight(e,n);var a=r.length;for(arguments.length<3&&(n=a?r[--a]:t.err(err_foldR_));--a>=0;)n=e(n,r[a],a,r);return n},t.sum=function(t){for(var e=t.length,r=0,n=0;n<e;n++)r+=t[n];return r},t.test=function(e){if(0!==e&&""!==e||(e=typeof e),"string"==typeof e)return function(t){return typeof t==e};if(e===Array||e===Date||e===RegExp)return function(t){return null!=t&&t.constructor==e};if(null===e)return t.eqTo(null);if(e.constructor==RegExp)return t("test",e);if("function"==typeof e)return e;if(Array.isArray(e))return 1==e.length?(e=t.test(e[0]),function(r){return Array.isArray(r)&&t.all(e,r)}):(e=t.map(t.test,e),function(r){return t.any(function(t){return t(r)},e)});if("object"==typeof e){var r=Object.keys(e),n=t.map(t.o(t.test,t(e)),r);return function(e){return null!=e&&t.all(function(t,r){return n[r](e[t])},r)}}t.err(err_test_)},t.translations_={},t.s=function(e){return t.translations_[e]||e},t}();Math.sign||(Math.sign=function(t){return(t=Number(t))>0?1:t<0?-1:t}),Math.trunc||(Math.trunc=function(t){return(t<0?Math.ceil:Math.floor)(t)}),M.toArray1=function(t){return Array.isArray(t)?t:[t]},M.getSpecAttrP=function(t,e){var r=t.getAttributeNode(e);return r&&!1!==r.specified?r.value:void 0},M.objToAttrs=function(t){var e=[];for(var r in t)e.push({name:r,value:t[r]});return e},M.setAttrs=function(t,e){return e&&null==e.length&&(e=M.objToAttrs(e)),F.iter(function(e){!1!==e.specified&&t.setAttribute(e.name,e.value)},e||[]),t},M.replaceNode=function(t,e){return e.parentNode.replaceChild(t,e),t},M.addClass=function(t,e){if(void 0!==t.className){r=t.className;t.className=(r?r+" ":"")+e}else{var r=t.getAttribute("class");t.setAttribute("class",(r?r+" ":"")+e)}return t},M.eToClassesS=function(t){return(void 0!==t.className?t.className:t.getAttribute("class"))||""},M.hasClass=function(t,e){return-1!=(" "+M.eToClassesS(t)+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")},M.inlineBlock=function(){var t=$("<div/>").css("display","inline-block");return arguments.length&&t.append.apply(t,arguments),t[0]},M.tr$=function(){var t=$.fn.append;return t.apply($("<tr/>"),F.map(function(e){return t.apply($("<td/>"),M.toArray1(e))},arguments))},M.mathmlNS="http://www.w3.org/1998/Math/MathML";var fixMathMLQ_=!1;!function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/webkit[ \/](\d+)\.(\d+)/);e?(M.webkitVersion=[Number(e[1]),Number(e[2])],fixMathMLQ_=M.webkitVersion[0]<=540):(e=t.match(/(opera)(?:.*version)?[ \/]([\w.]+)/)||t.match(/(msie) ([\w.]+)/)||t.indexOf("compatible")<0&&t.match(/(mozilla)(?:.*? rv:([\w.]+))?/))&&(M[e[1]+"Version"]=e[2]||"0")}(),M.msieVersion&&document.write('<object id=MathPlayer classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987">','</object><?IMPORT namespace="m" implementation="#MathPlayer" ?>'),function(){if(self.location){var t=location.search.match(/[?&;]mathml=(?:(off|false)|(on|true))\b/i);t?M.MathML=!t[1]:(M.webkitVersion&&F.cmpLex(F.cmpX,M.webkitVersion,[537,17])<0||M.operaVersion)&&(M.MathML=!1)}}(),M.canMathML=function(){if(M.msieVersion&&!M.MathPlayer)try{if(new ActiveXObject("MathPlayer.Factory.1"),null==M.MathPlayer)M.MathPlayer=!0;else if(!M.MathPlayer)return!1}catch(t){M.MathPlayer=!1}if(!M.MathPlayer&&void 0===document.createElementNS)return!1;var t=newMeNS("math",newMeNS("mn","1")),e=newMeNS("math",newMeNS("mfrac",[newMeNS("mn","1"),newMeNS("mn","2")])),r=$(F.map(function(t){return t.setAttribute("display","block"),$("<div/>").append(t)[0]},[t,e]));r.css("visibility","hidden").appendTo(document.body);var n=$(r[1]).height()>$(r[0]).height()+2;return r.remove(),n},M.mtagName=function(t){return"A"==t.tagName&&1==t.childNodes.length&&(t=t.firstChild),t.getAttribute("mtagname")||t.tagName.toLowerCase().replace(/^m:/,"")},M.mchilds=function(t){function e(t){return"SPAN"==t.tagName||F.err(err_span0_),t.firstChild}"A"==t.tagName&&1==t.childNodes.length&&(t=t.firstChild);for(var r=t.getAttribute("mtagname");"SPAN"==t.tagName;)t=t.firstChild;if("TABLE"==t.tagName){if("TBODY"==(t=t.firstChild).tagName||F.err(err_mchilds_tbody_),"mtable"==r)return t.childNodes;n=t.childNodes;return"mover"==r?n=[n[1],n[0]]:"munderover"==r&&(n=[n[1],n[2],n[0]]),F.map(function(t){return t.firstChild.firstChild},n)}if("MROW"==t.tagName&&r){var n=t.childNodes;if("msqrt"==r)return[e(e(n[1]))];if("mroot"==r)return[e(e(n[2])),e(n[0])];"mmultiscripts"==r||F.err(err_mchilds_mrow_);var a=Number(t.getAttribute("nprescripts"));0<=a&&a<n.length&&a%2==0||F.err(err_mchilds_mmultiscripts_);for(var i=[n[a]],o=a+1;o<n.length;o++)i.push(e(n[o]));if(a){i.push(t.ownerDocument.createElement("mprescripts"));for(o=0;o<a;o++)i.push(e(n[o]))}return i}return F.elem(t.tagName,["MSUB","MSUP","MSUBSUP"])?F.map(function(t,r){return r?e(t):t},t.childNodes):"MSPACE"==t.tagName?[]:t.childNodes};var mtokens_=["mn","mi","mo","mtext","mspace","ms"],impMRows_=["fmath","msqrt","mtd","mstyle","merror","mpadded","mphantom","menclose"],accentDsByS_={"¯":[0,.85],"‾":[0,.85],"˙":[0,.75],"ˇ":[0,.7],"^":[0,.5],"~":[0,.4],"→":[.25,.25],_:[.7,0],"−":[.25,.45],".":[.6,.1]};M.newMe=function(t,e,r,n){if(n||(r&&9==r.nodeType?(n=r,r=void 0):n=document),null!=M.MathML||F.err(err_newMe_MathML_),M.MathML)return newMeNS(t,e,r,n);"math"==t&&(t="fmath");var a=$(appendMeArgs(n.createElement(t.toUpperCase()),e)),i=F.slice(a[0].childNodes);F.elem(t,impMRows_)&&1!=i.length&&(i=[M.newMe("mrow",i,void 0,n)],0==a[0].childNodes.length||F.err(err_newMe_imp_mrow_),a.append(i[0]));var o=F.map(function(t){return Number(t.fmUp||.6)},i),s=F.map(function(t){return Number(t.fmDn||.6)},i);if("fmath"==t||"mn"==t||"mtext"==t||"mprescripts"==t||"none"==t);else if("mstyle"==t||"merror"==t||"mpadded"==t||"mphantom"==t||"menclose"==t)i[0].fmUp&&(a[0].fmUp=i[0].fmUp),i[0].fmDn&&(a[0].fmDn=i[0].fmDn);else if("mi"==t)3==(C=1==i.length?i[0]:{}).nodeType&&1==C.data.length&&(a.addClass("fm-mi-length-1"),"f"==C.data&&a.css("padding-right","0.44ex"));else if("mo"==t)3==(C=1==i.length?i[0]:{}).nodeType&&/[\]|([{‖)}]/.test(C.data)&&a.addClass("fm-mo-Luc");else if("mspace"==t){j=M.setAttrs(a[0],r);r=void 0,j.style.marginRight=j.getAttribute("width")||"0px",j.style.paddingRight="0.001em",a.append("‌"),a.css("visibility","hidden")}else if("mrow"==t){var m=F.applyF(Math.max,o),l=F.applyF(Math.max,s);(m>.65||l>.65)&&(a[0].fmUp=m,a[0].fmDn=l,F.iter(F([m,l,F._,void 0],checkVertStretch),i))}else if("mfrac"==t){if(2!=i.length)throw"Wrong number of <mfrac> arguments: "+i.length;var c=$('<td class="fm-num-frac fm-inline"></td>',n).append(i[0]),f=$('<td class="fm-den-frac fm-inline"></td>',n).append(i[1]);a=vertAlignE$(o[0]+s[0]+.03,o[1]+s[1]+.03,$('<span class="fm-vert fm-frac"></span>',n).append($("<table/>",n).append($("<tbody/>",n).append($("<tr/>",n).append(c)).append($("<tr/>",n).append(f))))).attr("mtagname",t)}else if("msqrt"==t||"mroot"==t){if(i.length!=("msqrt"==t?1:2))throw"Wrong number of <"+t+"> arguments: "+i.length;a=$("<mrow/>",n).attr("mtagname",t);var d=.06*(o[0]+s[0]),m=o[0]+d+.1,l=s[0];if("mroot"==t){var p=.6*(o[1]+s[1]),u=.25/.6-.25;m>p?u+=m/.6-o[1]:(u+=s[1],m=p),a.append($('<span class="fm-root fm-inline"></span>',n).append(i[1]).css("verticalAlign",u.toFixed(2)+"em"))}var h=$("<mo/>",n).addClass("fm-radic").append("√"),g=vertAlignE$(m,l,$('<span class="fm-vert fm-radicand"></span>',n).append(i[0]).css("borderTopWidth",d.toFixed(3)+"em"));checkVertStretch(m,l,h[0]),a.append(h).append(g),a[0].fmUp=m,a[0].fmDn=l}else if("msub"==t||"msup"==t||"msubsup"==t||"mmultiscripts"==t){if("mmultiscripts"!=t&&i.length!=("msubsup"==t?3:2))throw"Wrong number of <"+t+"> arguments: "+i.length;for(var m=o[0],l=s[0],_="msup"==t,v=m/.71-.6,b=l/.71-.6,y=1;y<i.length;y++){if("mmultiscripts"==t){if("none"==(S=M.mtagName(i[y])))continue;if("mprescripts"==S){if(_)throw'Repeated "mprescripts"';_=!0;continue}}y%2==(_?0:1)?b=Math.max(b,o[y]):v=Math.max(v,s[y])}for(var x=void 0,w=[],k=0,y=1;y<i.length;y++){if("mmultiscripts"==t){var S=M.mtagName(i[y]);if("mprescripts"==S){x=[],k=i.length-y-1;continue}}u=.25/.71-.25;y%2==(x?0:1)&&"msup"!=t?(u-=b,l=Math.max(l,.71*(b+s[y]))):(u+=v,m=Math.max(m,.71*(v+o[y]))),$(i[y]).wrap('<span class="fm-script fm-inline"></span>').parent().css("verticalAlign",u.toFixed(2)+"em"),M.msieVersion&&(document.documentMode||M.msieVersion)<8&&(i[y].style.zoom=1),"mmultiscripts"==t&&(x||w).push(i[y].parentNode)}"mmultiscripts"==t&&(a=$("<mrow/>").append($((x||[]).concat(i[0],w))).attr({mtagname:"mmultiscripts",nprescripts:k})),a[0].fmUp=m,a[0].fmDn=l}else if("munder"==t||"mover"==t||"munderover"==t){if(i.length!=("munderover"==t?3:2))throw"Wrong number of <"+t+"> arguments: "+i.length;var A,P=$("<tbody/>",n),m=.85*o[0],l=.85*s[0];if("munder"!=t){var N=i[i.length-1],T=void 0;A=$("<td/>",n).append(N),"MO"==N.nodeName&&1==N.childNodes.length&&3==(C=N.firstChild).nodeType&&(T=accentDsByS_[C.data]),T?(N.style.display="block",N.style.marginTop=(-T[0]).toFixed(2)+"em",N.style.marginBottom=(-T[1]).toFixed(2)+"em",m+=1.2-F.sum(T)):(A.addClass("fm-script fm-inline"),m+=.71*(o[i.length-1]+s[i.length-1])),P.append($("<tr/>",n).append(A))}if("MI"==i[0].nodeName&&1==i[0].childNodes.length){var C=i[0].firstChild,L=C.data;3==C.nodeType&&1==L.length&&(u=-1!="acegmnopqrsuvwxyz".indexOf(L)?.25:"t"==L?.15:0)&&(i[0].style.display="block",i[0].style.marginTop=(-u).toFixed(2)+"em",m-=u)}A=$('<td class="fm-underover-base"></td>',n).append(i[0]),P.append($("<tr/>",n).append(A)),"mover"!=t&&(A=$('<td class="fm-script fm-inline"></td>',n).append(i[1]),P.append($("<tr/>",n).append(A)),l+=.71*(o[1]+s[1])),a=vertAlignE$(m,l,$('<span class="fm-vert"></span>',n).append($("<table/>",n).append(P))).attr("mtagname",t)}else if("mtable"==t){P=$("<tbody/>",n).append($(i));a=$('<span class="fm-vert" mtagname="mtable"></span>',n).append($("<table/>",n).append(P));var I=F.sum(o)+F.sum(s);a[0].fmUp=a[0].fmDn=.5*I}else if("mtr"==t){a=$('<tr class="fm-mtr" mtagname="mtr"></tr>',n).append($(i));var m=.6,l=.6;F.iter(function(t,e){1==(t.getAttribute(M.MathML?"rowspan":"rowSpan")||1)&&(m=Math.max(m,o[e]),l=Math.max(l,s[e]))},i),a[0].fmUp=m+.25,a[0].fmDn=l+.25}else{if("mtd"!=t){if("mfenced"==t){j=M.setAttrs(a[0],r);return M.newMe("mrow",M.mfencedToMRowArgs(j),r,n)}throw"Unrecognized or unimplemented MathML tagName: "+t}a=$('<td class="fm-mtd" mtagname="mtd"></td>',n).append($(i)),o[0]>.65&&(a[0].fmUp=o[0]),s[0]>.65&&(a[0].fmDn=s[0]);var j=M.setAttrs(a[0],r);r=void 0;var D=j.getAttribute("rowspan"),E=j.getAttribute("columnspan");D&&(j.setAttribute("rowSpan",D),M.hasClass(j,"middle")||M.addClass(j,"middle")),E&&j.setAttribute("colSpan",E)}return checkMathMLAttrs(M.setAttrs(a[0],r))},M.mfencedToMRowArgs=function(t){function e(t){return M.newMe("mo",t,void 0,r)}"mfenced"==t.tagName.toLowerCase()||F.err(err_mfencedToMRowArgs_);var r=t.ownerDocument,n=[e(F.defOr(M.getSpecAttrP(t,"open"),"(")),e(F.defOr(M.getSpecAttrP(t,"close"),")"))],a=F.slice(t.childNodes);if(0==a.length)return n;var i;if(1==a.length)i=a[0];else{for(var o=F.defOr(M.getSpecAttrP(t,"separators"),",").match(/\S/g),s=o?a.length-1:0,m=0;m<s;m++)a.splice(2*m+1,0,e(o[Math.min(m,o.length-1)]));i=M.newMe("mrow",a,void 0,r)}return n.splice(1,0,i),n},M.spaceMe=function(t,e){return M.newMe("mspace",void 0,{width:t},e)},M.fenceMe=function(t,e,r,n){return M.newMe("mrow",[M.newMe("mo",F.defOr(e,"("),n),t,M.newMe("mo",F.defOr(r,")"),n)],n)},F.iter(function(t){M[t]=F(M.newMe,t)},["mn","mi","mo","mtext","mspace","mrow","mfenced","mfrac","msqrt","mroot","msub","msup","msubsup","mmultiscripts","mprescripts","none","munder","mover","munderover","mtable","mtr","mtd","mstyle","merror","mpadded","mphantom","menclose"]),M.setMathBlockQ=function(t,e){return e?(t.setAttribute("display","block"),M.addClass(t,"ma-block")):M.MathML||$(t).addClass("fm-inline"),t},M.math=function(t,e,r){return M.setMathBlockQ(M.newMe("math",t,r),e)},M.eToMathE=function(t){function e(t){return 1!=t.nodeType?t:(F.elem(t.tagName,mtokens_)||F.iter(e,t.childNodes),checkMathMLAttrs(t))}function r(t){var e=t.tagName.toLowerCase(),a=t.childNodes;F.elem(e,mtokens_)?"mo"==e&&1==a.length&&3==a[0].nodeType&&"-"==a[0].data&&(a=M["-"]):a=F.concatMap(function(e){return 3==e.nodeType?/^\s*$/.test(e.data)?[]:[M.mtext(e.data,n)]:8==e.nodeType?[]:(1==t.nodeType||F.err(err_newMeDeep_),[r(e)])},a);var i=M.newMe(e,a,t.attributes,n);return"math"==e&&M.setMathBlockQ(i,"block"==t.getAttribute("display")),i}if(null!=M.MathML&&"math"==t.tagName.toLowerCase()||F.err(err_eToMathE_),M.MathML&&"math"==t.tagName)return fixMathMLQ_?e(t):t;var n=t.ownerDocument;return r(t)},M["-"]="−",M.trimNumS=function(t){return t.replace(/(\d\.\d*?)0+(?!\d)/g,"$1").replace(/(\d)\.(?!\d)/g,"$1").replace(/[-\u2212]0(?![.\d])/g,"0")},M.numS=function(t,e){return e&&(t=M.trimNumS(t)),t.replace(/Infinity/gi,"∞").replace(/NaN/gi,"{?}").replace(/e(-\d+)/gi,"·10^{$1}").replace(/e\+?(\d+)/gi,"·10^$1").replace(/-/g,M["-"])},M.combiningChar_="[̀-ͯ᷀-᷿⃐-⃿︠-︯]",M.surrPair_="[\ud800-\udbff][\udc00-\udfff]";var decComma_,escPat_="[\\\\`]([A-Za-z]+|.)";M.decimalComma=function(t){if(null!=t){decComma_=t;var e=(t?"\\d*,\\d+|":"")+"\\d+\\.?\\d*|\\.\\d+";M.re_=RegExp("("+e+")|"+escPat_+"|"+M.surrPair_+"|\\S"+M.combiningChar_+"*","g")}return decComma_};var commaLangs="af|an|ar|av|az|ba|be|bg|bs|ca|ce|co|cs|cu|cv|da|de|el|es|et|eu|fi|fo|fr|gl|hr|hu|hy|id|is|it|jv|kk|kl|kv|lb|lt|lv|mk|mn|mo|nl|no|os|pl|pt|ro|ru|sc|sk|sq|sr|su|sv|tr|tt|ug|uk|vi|yi";M.decimalComma(RegExp("^("+commaLangs+")\\b","i").test(document.documentElement.lang)),M.infix_={"⊂⃒":240,"⊃⃒":240,"≪̸":260,"≫̸":260,"⪯̸":260,"⪰̸":260,"∽̱":265,"≂̸":265,"≎̸":265,"≏̸":265,"≦̸":265,"≿̸":265,"⊏̸":265,"⊐̸":265,"⧏̸":265,"⧐̸":265,"⩽̸":265,"⩾̸":265,"⪡̸":265,"⪢̸":265," ":390,"":500},M.prefix_={},M.postfix_={},setPrecs(M.infix_,[[21,"|"],[30,";"],[40,",⁣"],[70,"∴∵"],[100,":"],[110,"϶"],[150,"…⋮⋯⋱"],[160,"∋"],[170,"⊢⊣⊤⊨⊩⊬⊭⊮⊯"],[190,"∨"],[200,"∧"],[240,"∁∈∉∌⊂⊃⊄⊅⊆⊇⊈⊉⊊⊋"],[241,"≤"],[242,"≥"],[243,">"],[244,"≯"],[245,"<"],[246,"≮"],[247,"≈"],[250,"∼≉"],[252,"≢"],[255,"≠"],[260,"=∝∤∥∦≁≃≄≅≆≇≍≔≗≙≚≜≟≡≨≩≪≫≭≰≱≺≻≼≽⊀⊁⊥⊴⊵⋉⋊⋋⋌⋔⋖⋗⋘⋙⋪⋫⋬⋭■□▪▫▭▮▯▰▱△▴▵▶▷▸▹▼▽▾▿◀◁◂◃◄◅◆◇◈◉◌◍◎●◖◗◦⧀⧁⧣⧤⧥⧦⧳⪇⪈⪯⪰"],[265,"⁄∆∊∍∎∕∗∘∙∟∣∶∷∸∹∺∻∽∾∿≂≊≋≌≎≏≐≑≒≓≕≖≘≝≞≣≦≧≬≲≳≴≵≶≷≸≹≾≿⊌⊍⊎⊏⊐⊑⊒⊓⊔⊚⊛⊜⊝⊦⊧⊪⊫⊰⊱⊲⊳⊶⊷⊹⊺⊻⊼⊽⊾⊿⋄⋆⋇⋈⋍⋎⋏⋐⋑⋒⋓⋕⋚⋛⋜⋝⋞⋟⋠⋡⋢⋣⋤⋥⋦⋧⋨⋩⋰⋲⋳⋴⋵⋶⋷⋸⋹⋺⋻⋼⋽⋾⋿▲❘⦁⦂⦠⦡⦢⦣⦤⦥⦦⦧⦨⦩⦪⦫⦬⦭⦮⦯⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧂⧃⧄⧅⧆⧇⧈⧉⧊⧋⧌⧍⧎⧏⧐⧑⧒⧓⧔⧕⧖⧗⧘⧙⧛⧜⧝⧞⧠⧡⧢⧧⧨⧩⧪⧫⧬⧭⧮⧰⧱⧲⧵⧶⧷⧸⧹⧺⧻⧾⧿⨝⨞⨟⨠⨡⨢⨣⨤⨥⨦⨧⨨⨩⨪⨫⨬⨭⨮⨰⨱⨲⨳⨴⨵⨶⨷⨸⨹⨺⨻⨼⨽⨾⩀⩁⩂⩃⩄⩅⩆⩇⩈⩉⩊⩋⩌⩍⩎⩏⩐⩑⩒⩓⩔⩕⩖⩗⩘⩙⩚⩛⩜⩝⩞⩟⩠⩡⩢⩣⩤⩥⩦⩧⩨⩩⩪⩫⩬⩭⩮⩯⩰⩱⩲⩳⩴⩵⩶⩷⩸⩹⩺⩻⩼⩽⩾⩿⪀⪁⪂⪃⪄⪅⪆⪉⪊⪋⪌⪍⪎⪏⪐⪑⪒⪓⪔⪕⪖⪗⪘⪙⪚⪛⪜⪝⪞⪟⪠⪡⪢⪣⪤⪥⪦⪧⪨⪩⪪⪫⪬⪭⪮⪱⪲⪳⪴⪵⪶⪷⪸⪹⪺⪻⪼⪽⪾⪿⫀⫁⫂⫃⫄⫅⫆⫇⫈⫉⫊⫋⫌⫍⫎⫏⫐⫑⫒⫓⫔⫕⫖⫗⫘⫙⫚⫛⫝⫝⫞⫟⫠⫡⫢⫣⫤⫥⫦⫧⫨⫩⫪⫫⫬⫭⫮⫯⫰⫱⫲⫳⫴⫵⫶⫷⫸⫹⫺⫻⫽⫾"],[270,"←↑→↓↔↕↖↗↘↙↚↛↜↝↞↟↠↡↢↣↤↥↦↧↨↩↪↫↬↭↮↯↰↱↲↳↴↵↶↷↸↹↺↻↼↽↾↿⇀⇁⇂⇃⇄⇅⇆⇇⇈⇉⇊⇋⇌⇍⇎⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇚⇛⇜⇝⇞⇟⇠⇡⇢⇣⇤⇥⇦⇧⇨⇩⇪⇫⇬⇭⇮⇯⇰⇱⇲⇳⇴⇵⇶⇷⇸⇹⇺⇻⇼⇽⇾⇿⊸⟰⟱⟵⟶⟷⟸⟹⟺⟻⟼⟽⟾⟿⤀⤁⤂⤃⤄⤅⤆⤇⤈⤉⤊⤋⤌⤍⤎⤏⤐⤑⤒⤓⤔⤕⤖⤗⤘⤙⤚⤛⤜⤝⤞⤟⤠⤡⤢⤣⤤⤥⤦⤧⤨⤩⤪⤫⤬⤭⤮⤯⤰⤱⤲⤳⤴⤵⤶⤷⤸⤹⤺⤻⤼⤽⤾⤿⥀⥁⥂⥃⥄⥅⥆⥇⥈⥉⥊⥋⥌⥍⥎⥏⥐⥑⥒⥓⥔⥕⥖⥗⥘⥙⥚⥛⥜⥝⥞⥟⥠⥡⥢⥣⥤⥥⥦⥧⥨⥩⥪⥫⥬⥭⥮⥯⥰⥱⥲⥳⥴⥵⥶⥷⥸⥹⥺⥻⥼⥽⥾⥿⦙⦚⦛⦜⦝⦞⦟⧟⧯⧴⭅⭆"],[275,"+-±−∓∔⊞⊟"],[300,"⊕⊖⊘"],[340,"≀"],[350,"∩∪"],[390,"*.×•⁢⊠⊡⋅⨯⨿"],[400,"·"],[410,"⊗"],[640,"%"],[650,"\\∖"],[660,"/÷"],[710,"⊙"],[825,"@"],[835,"?"],[850,"⁡"],[880,"^_⁤"]]),setPrecs(M.prefix_,[[10,"‘“"],[20,"([{‖⌈⌊❲⟦⟨⟪⟬⟮⦀⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧼"],[230,"∀∃∄"],[290,"∑⨊⨋"],[300,"∬∭⨁"],[310,"∫∮∯∰∱∲∳⨌⨍⨎⨏⨐⨑⨒⨓⨔⨕⨖⨗⨘⨙⨚⨛⨜"],[320,"⋃⨃⨄"],[330,"⋀⋁⋂⨀⨂⨅⨆⨇⨈⨉⫼⫿"],[350,"∏∐"],[670,"∠∡∢"],[680,"¬"],[740,"∂∇"],[845,"ⅅⅆ√∛∜"]]),setPrecs(M.postfix_,[[10,"’”"],[20,")]}‖⌉⌋❳⟧⟩⟫⟭⟯⦀⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧽"],[800,"′♭♮♯"],[810,"!"],[880,"&'`~¨¯°´¸ˆˇˉˊˋˍ˘˙˚˜˝˷̂̑‾⃛⃜⎴⎵⏜⏝⏞⏟⏠⏡"]]);var s_,s_or_mx_a_,s_or_mx_i_,docP_,precAdj_;M.macros_={mn:F(mtokenScan,"mn"),mi:F(mtokenScan,"mi"),mo:F(mtokenScan,"mo"),text:F(mtokenScan,"mtext"),html:htmlScan,sp:spScan,attr:attrScan,attrMML:F(attrScan,null,!0),id:F(attrScan,"id"),dir:F(attrScan,"dir"),cl:clScan,mv:mvScan,bo:F(mvScan,"bold"),it:F(mvScan,"italic"),bi:F(mvScan,"bold-italic"),sc:F(mvScan,"script"),bs:F(mvScan,"bold-script"),fr:F(mvScan,"fraktur"),ds:F(mvScan,"double-struck"),bf:F(mvScan,"bold-fraktur"),mstyle:F(meScan,"mstyle"),merror:F(meScan,"merror"),mpadded:F(meScan,"mpadded"),phantom:F(phantomScan,"phantom"),vphantom:F(phantomScan,"vphantom"),enclose:F(meScan,"menclose"),ov:ovScan,minsize:minsizeScan,mrowOne:mrow1Scan,binom:binomScan},M.alias_={"-":M["-"],"'":"′","ℭ":["C","fraktur"],"ℌ":["H","fraktur"],"ℑ":["I","fraktur"],"ℜ":["R","fraktur"],"ℨ":["Z","fraktur"],"ℬ":["B","script"],"ℰ":["E","script"],"ℱ":["F","script"],"ℋ":["H","script"],"ℐ":["I","script"],"ℒ":["L","script"],"ℳ":["M","script"],"ℛ":["R","script"],"ℯ":["e","script"],"ℊ":["g","script"],"ℴ":["o","script"]};var spaces_={",":".17em",":":".22em",";":".28em","!":"-.17em"};M.dtableQ=!1,M.macro1s_={mtd:parse_mtd_tokP,rowspan:parse_rowspan_tokP,colspan:parse_colspan_tokP,mtr:parse_mtr_tokP,dtable:F(parse_table_tokP,!0),ttable:F(parse_table_tokP,!1),table:F(parse_table_tokP,void 0),math:parse_math_tokP};var embelWs_={_:"sub","^":"sup","↙":"under","↖":"over"};M.sMxAToMe=function(t,e){e||(e=document),M.infix_[""]&&M.infix_[","]||F.err(err_sToMe_1_),void 0===M.MathML&&(M.MathML=M.canMathML()),M.re_.lastIndex=0,s_="",s_or_mx_a_=Array.isArray(t)?t:[t],s_or_mx_i_=0,docP_=e,precAdj_=M.infix_[""];var r=parse_mxP_tokP(0);if(r[1])throw"Extra input:  "+r[1][1]+s_.substring(M.re_.lastIndex)+(s_or_mx_i_<s_or_mx_a_.length?"...":"");return(M.re_.lastIndex<s_.length||s_or_mx_i_<s_or_mx_a_.length)&&F.err(err_sToMe_2_),r[0]||emptyMe_()},M.sToMathE=function(t,e,r){var n=M.sMxAToMe(t,r);return F.elem(M.mtagName(n),["math","fmath"])||(n=M.newMe("math",n,r)),"string"==typeof t&&n.setAttribute("alttext",t),M.setMathBlockQ(n,e)},M.$mathQ=!0,M.inline$$Q=!1,M.parseMath=function(t){if(1==t.nodeType&&"SCRIPT"!=t.tagName)if("MATH"==t.tagName.toUpperCase()){var e=M.eToMathE(t);e!=t&&t.parentNode.replaceChild(e,t)}else for(var r=t.firstChild;r;){var n=r.nextSibling;M.parseMath(r),r=n}else if(3==t.nodeType&&/[$\\]/.test(t.data)){for(var a=t.ownerDocument,i=t.data,o=[],s="",m=/\\([$\\])|\$\$?|\\[([]/g;;){var l=m.lastIndex,c=m.exec(i),f=c?c.index:i.length;if(l<f&&(s+=i.substring(l,f)),c&&c[1])s+=c[1];else{var d,p=-1;if(c){if(d="\\("==c[0]?"\\)":"\\["==c[0]?"\\]":c[0],m.lastIndex<i.length&&("$"!=c[0]||M.$mathQ))for(p=i.indexOf(d,m.lastIndex);-1!=p&&"\\"==i.charAt(p-1);)p=i.indexOf(d,p+1);if(-1==p){s+=c[0];continue}}if(s&&(o.push(a.createTextNode(s)),s=""),!c)break;var u="$$"==c[0]||"\\["==c[0],h=M.sToMathE(i.substring(m.lastIndex,p),u,a);if(u&&M.inline$$Q&&F.elem(t.parentNode.nodeName,["P","SPAN"])){var g=$("<div/>",a).css("display","inline-block").append(h);h=(g=$("<span/>",a).css("white-space","nowrap").append(g))[0]}o.push(h),m.lastIndex=p+d.length}}F.iter(function(e){t.parentNode.insertBefore(e,t)},o),t.parentNode.removeChild(t)}},M.parseMathQ=!0,null==$.fn.parseMath&&($.fn.parseMath=function(){return F.iter(M.parseMath,this),this}),exports.parseMath=parseMath;
